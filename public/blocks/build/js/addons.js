(window["webpackJsonpGUI"] = window["webpackJsonpGUI"] || []).push([["addons"],{

/***/ "./node_modules/css-loader/index.js!./src/addons/addons/pause/style.css":
/*!*********************************************************************!*\
  !*** ./node_modules/css-loader!./src/addons/addons/pause/style.css ***!
  \*********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(/*! ../../../../node_modules/css-loader/lib/css-base.js */ "./node_modules/css-loader/lib/css-base.js")(false);
// imports


// module
exports.push([module.i, ".pause-btn {\n  width: 2rem;\n  height: 2rem;\n  padding: 0.375rem;\n  border-radius: 0.25rem;\n  user-select: none;\n  user-drag: none;\n  cursor: pointer;\n}\n\n.pause-btn:hover {\n  background-color: var(--looks-light-transparent);\n}\n", ""]);

// exports


/***/ }),

/***/ "./node_modules/css-loader/index.js?!./node_modules/postcss-loader/src/index.js?!./src/addons/modal.css":
/*!*************************************************************************************************************!*\
  !*** ./node_modules/css-loader??ref--5-1!./node_modules/postcss-loader/src??postcss!./src/addons/modal.css ***!
  \*************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(/*! ../../node_modules/css-loader/lib/css-base.js */ "./node_modules/css-loader/lib/css-base.js")(false);
// imports


// module
exports.push([module.i, ".modal_modal-content_fN1pD {\n  background-color: var(--ui-modal-background);\n  color: var(--ui-modal-foreground);\n}\n", ""]);

// exports
exports.locals = {
	"modal-content": "modal_modal-content_fN1pD",
	"modalContent": "modal_modal-content_fN1pD"
};

/***/ }),

/***/ "./node_modules/url-loader/dist/cjs.js!./src/addons/addons/mute-project/mute.svg":
/*!***************************************************************************************!*\
  !*** ./node_modules/url-loader/dist/cjs.js!./src/addons/addons/mute-project/mute.svg ***!
  \***************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjBweCIgaGVpZ2h0PSIyMHB4IiB2aWV3Qm94PSIwIDAgMjAgMjAiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDU1LjIgKDc4MTgxKSAtIGh0dHBzOi8vc2tldGNoYXBwLmNvbSAtLT4KICAgIDx0aXRsZT5Tb3VuZC9FZmZlY3RzL011dGU8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZyBpZD0iU291bmQvRWZmZWN0cy9NdXRlIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8cGF0aCBmaWxsPSIjQ0Y2M0NGIiBkPSJNMTMuNDU0MTc0OSw1LjA0ODE1MjQzIEwxNS42MjgxMTY4LDIuODc0MjEwNTQgQzE1LjkyMTAxLDIuNTgxMzE3MzIgMTYuMzk1ODgzNywyLjU4MTMxNzMyIDE2LjY4ODc3NywyLjg3NDIxMDU0IEMxNi45ODE2NzAyLDMuMTY3MTAzNzYgMTYuOTgxNjcwMiwzLjY0MTk3NzQ5IDE2LjY4ODc3NywzLjkzNDg3MDcxIEw0LjUzMDMzMDA5LDE2LjA5MzMxNzYgQzQuMjM3NDM2ODcsMTYuMzg2MjEwOCAzLjc2MjU2MzEzLDE2LjM4NjIxMDggMy40Njk2Njk5MSwxNi4wOTMzMTc2IEMzLjE3Njc3NjcsMTUuODAwNDI0NCAzLjE3Njc3NjcsMTUuMzI1NTUwNiAzLjQ2OTY2OTkxLDE1LjAzMjY1NzQgTDYuMzEyMTQ5MzIsMTIuMTkwMTc4IEM2LjEyNDExOTEsMTIuMDYyMTM3OSA2LDExLjg0NjMzMzEgNiwxMS42MDI5ODc1IEw2LDguNjM3NDg3NSBDNiw4LjI0NzExMjUgNi4zMTk0MTUyNyw3LjkyNzYxMjUgNi43MDk2ODY3NSw3LjkyNzYxMjUgTDcuMDI0NjAzMjIsNy45Mjc2MTI1IEM4Ljc1Nzc2ODQ4LDcuOTI3NjEyNSAxMC4yOTQxMTEsNi44MTM4NjI1IDEwLjgzMzk2NzgsNS4xNjY4NjI1IEMxMC45Mjk1Njc0LDQuODc0MzYyNSAxMS4yMDE3NDUyLDQuNjc3NDg3NSAxMS41MDc2NjQxLDQuNjc3NDg3NSBMMTIuODMxNDM3OSw0LjY3NzQ4NzUgQzEzLjEwMDI4NDQsNC42Nzc0ODc1IDEzLjMzNDEwNzUsNC44MjcxNzIwOCAxMy40NTQxNzQ5LDUuMDQ4MTUyNDMgWiBNMTMuNTQsOS4wODM2NDc3MSBMMTMuNTQsMTQuODUzMTEyNSBDMTMuNTQsMTUuMjQ1NzM3NSAxMy4yMjI4MzQxLDE1LjU2Mjk4NzUgMTIuODMxNDM3OSwxNS41NjI5ODc1IEwxMS41MDc2NjQxLDE1LjU2Mjk4NzUgQzExLjIwMTc0NTIsMTUuNTYyOTg3NSAxMC45Mjk1Njc0LDE1LjM2NjExMjUgMTAuODMzOTY3OCwxNS4wNzM2MTI1IEMxMC41NzczNzg1LDE0LjI5MDgwNzcgMTAuMDk1NjgxMywxMy42Mjg0NjUgOS40NzQ3MzUzMSwxMy4xNDg5MTI0IEwxMy41NCw5LjA4MzY0NzcxIFoiIGlkPSJwYXRoLTEiPjwvcGF0aD4KICAgIDwvZz4KPC9zdmc+Cg==");

/***/ }),

/***/ "./node_modules/url-loader/dist/cjs.js!./src/addons/addons/pause/pause.svg":
/*!*********************************************************************************!*\
  !*** ./node_modules/url-loader/dist/cjs.js!./src/addons/addons/pause/pause.svg ***!
  \*********************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMTgiIHdpZHRoPSIxOCI+PHBhdGggZD0iTTIzMS40MjkgMTg4LjkyOVYxNzEuMDdoNC4yODV2MTcuODU4em0xMi4xNDIgMFYxNzEuMDdoNC4yODZ2MTcuODU4eiIgdHJhbnNmb3JtPSJtYXRyaXgoMS4wMzMwOSAwIDAgLjk1NDI3IC0yMzguNTczIC0xNjIuNzY5KSIgZGF0YS1wYXBlci1kYXRhPSJ7JnF1b3Q7aXNQYWludGluZ0xheWVyJnF1b3Q7OnRydWV9IiBmaWxsPSIjZmZhZTAwIiBzdHJva2U9IiNkODk0MDAiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3R5bGU9Im1peC1ibGVuZC1tb2RlOm5vcm1hbCIvPjwvc3ZnPg==");

/***/ }),

/***/ "./node_modules/url-loader/dist/cjs.js!./src/addons/addons/pause/play.svg":
/*!********************************************************************************!*\
  !*** ./node_modules/url-loader/dist/cjs.js!./src/addons/addons/pause/play.svg ***!
  \********************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMTgiIHdpZHRoPSIxOCI+PHBhdGggZD0ibTI0Ni4wNTUgMTgwLTEyLjExIDEyLjExdi0yNC4yMnoiIHRyYW5zZm9ybT0ibWF0cml4KDEuMTM5NDkgMCAwIC42Nzk0MyAtMjY0LjU5NSAtMTEzLjI5OCkiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlPSIjZDg5NDAwIiBmaWxsPSIjZmZhZTAwIiBkYXRhLXBhcGVyLWRhdGE9InsmcXVvdDtpc1BhaW50aW5nTGF5ZXImcXVvdDs6dHJ1ZX0iLz48L3N2Zz4=");

/***/ }),

/***/ "./src/addons/addon-precedence.js":
/*!****************************************!*\
  !*** ./src/addons/addon-precedence.js ***!
  \****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
// This list is a subset of all addon IDs to control the order of userstyles.
// The last item in the list is given the highest precedence (last in the DOM).
// If an addon isn't listed here, it's interpreted to have lowest precedence and
// that its order with other unlisted addons does not matter.
var addonPrecedence = ['columns', 'editor-stage-left', 'editor-theme3', 'hide-stage'];

/**
 * @param {string} addonId The addon ID
 * @returns {number} An integer >= 0
 */
var getPrecedence = function getPrecedence(addonId) {
  return addonPrecedence.indexOf(addonId) + 1;
};
/* harmony default export */ __webpack_exports__["default"] = (getPrecedence);

/***/ }),

/***/ "./src/addons/addons-l10n/en.json":
/*!****************************************!*\
  !*** ./src/addons/addons-l10n/en.json ***!
  \****************************************/
/*! exports provided: _general/blocks/anticlockwise, _general/blocks/clockwise, _general/blocks/green-flag, editor-devtools/clean-plus, editor-devtools/copy-all, editor-devtools/copy-block, editor-devtools/cut-block, editor-devtools/lists, editor-devtools/make-space, editor-devtools/orphaned, editor-devtools/paste, editor-devtools/replace, editor-devtools/swap, editor-devtools/unused-list, editor-devtools/unused-var, editor-devtools/var-not-exist, editor-devtools/variables, find-bar/complex-broadcast, find-bar/event, find-bar/find-placeholder, find-bar/list-global, find-bar/list-local, find-bar/var-global, find-bar/var-local, middle-click-popup/start-typing, editor-searchable-dropdowns/createBroadcast, editor-searchable-dropdowns/createGlobalList, editor-searchable-dropdowns/createGlobalVariable, editor-searchable-dropdowns/createLocalList, editor-searchable-dropdowns/createLocalVariable, data-category-tweaks-v2/for-all-sprites, data-category-tweaks-v2/for-this-sprite-only, data-category-tweaks-v2/list-category, hide-flyout/lock, hide-flyout/unlock, mediarecorder/cancel, mediarecorder/click-flag, mediarecorder/click-flag-description, mediarecorder/option-title, mediarecorder/record, mediarecorder/record-after-flag, mediarecorder/record-audio, mediarecorder/record-audio-description, mediarecorder/record-description, mediarecorder/record-duration, mediarecorder/record-mic, mediarecorder/record-until-stop, mediarecorder/record-until-stop-disabled, mediarecorder/start, mediarecorder/start-delay, mediarecorder/starting-in, mediarecorder/stop, debugger/block-breakpoint, debugger/block-error, debugger/block-log, debugger/block-warn, debugger/cannot-pause-player, debugger/clear, debugger/clone-of, debugger/close, debugger/console, debugger/debug, debugger/empty-string, debugger/enter-format, debugger/export, debugger/export-desc, debugger/icon-error, debugger/icon-warn, debugger/log-msg-broadcasted, debugger/log-msg-clone-cap, debugger/log-msg-clone-created, debugger/log-msg-flag-clicked, debugger/no-logs, debugger/no-threads-running, debugger/performance-clonecount-graph-tooltip, debugger/performance-clonecount-title, debugger/performance-framerate-graph-tooltip, debugger/performance-framerate-title, debugger/step, debugger/step-desc, debugger/tab-logs, debugger/tab-performance, debugger/tab-threads, debugger/thread, debugger/unknown-sprite, debugger/unpause, pause/pause, pause/play, clones/clones, color-picker/hex, remove-sprite-confirm/confirm, block-count/blocks, onion-skinning/behind, onion-skinning/front, onion-skinning/layering, onion-skinning/merge, onion-skinning/mode, onion-skinning/next, onion-skinning/opacity, onion-skinning/opacityStep, onion-skinning/previous, onion-skinning/settings, onion-skinning/tint, onion-skinning/toggle, paint-snap/boxCenter, paint-snap/boxCorners, paint-snap/boxEdgeMids, paint-snap/objectCenters, paint-snap/objectCorners, paint-snap/objectEdges, paint-snap/objectMidlines, paint-snap/off, paint-snap/on, paint-snap/pageAxes, paint-snap/pageCenter, paint-snap/pageCorners, paint-snap/pageEdges, paint-snap/settings, paint-snap/snapFrom, paint-snap/snapTo, paint-snap/threshold, paint-snap/toggle, 2d-color-picker/shade, better-img-uploads/upload, variable-manager/for-all-sprites, variable-manager/for-this-sprite, variable-manager/search, variable-manager/too-big, variable-manager/variables, search-sprites/placeholder, sprite-properties/close-properties-panel-tooltip, sprite-properties/open-properties-panel-tooltip, gamepad/axes-a-b, gamepad/axis-arrows, gamepad/axis-cursor, gamepad/axis-custom, gamepad/axis-none, gamepad/browser-support, gamepad/button-n, gamepad/clear, gamepad/config-header, gamepad/key-click, gamepad/key-down, gamepad/key-enter, gamepad/key-left, gamepad/key-none, gamepad/key-right, gamepad/key-space, gamepad/key-up, gamepad/keyinput-title, gamepad/no-controllers, gamepad/reset, gamepad/settings, gamepad/store-in-project, folders/add-to-folder, folders/closed-folder, folders/confirm-backpack-folder, folders/create-folder, folders/name-not-allowed, folders/name-prompt, folders/name-prompt-title, folders/open-folder, folders/remove-folder, folders/remove-from-folder, folders/rename-folder, folders/rename-folder-prompt, folders/rename-folder-prompt-title, block-switching/control_forever, block-switching/control_if, block-switching/control_if_else, block-switching/control_repeat_until, block-switching/control_wait_until, block-switching/data_changevariableby, block-switching/data_deletealloflist, block-switching/data_deleteoflist, block-switching/data_hidelist, block-switching/data_hidevariable, block-switching/data_insertatlist, block-switching/data_replaceitemoflist, block-switching/data_setvariableto, block-switching/data_showlist, block-switching/data_showvariable, block-switching/debugger_error, block-switching/debugger_log, block-switching/debugger_warn, block-switching/event_broadcast, block-switching/event_broadcastandwait, block-switching/looks_backdropnumbername, block-switching/looks_changeeffectby, block-switching/looks_changesizeby, block-switching/looks_costumenumbername, block-switching/looks_goforwardbackwardlayers, block-switching/looks_gotofrontback, block-switching/looks_hide, block-switching/looks_nextbackdrop, block-switching/looks_nextcostume, block-switching/looks_say, block-switching/looks_sayforsecs, block-switching/looks_seteffectto, block-switching/looks_setsizeto, block-switching/looks_show, block-switching/looks_switchbackdropto, block-switching/looks_switchbackdroptoandwait, block-switching/looks_think, block-switching/looks_thinkforsecs, block-switching/motion_changexby, block-switching/motion_changeyby, block-switching/motion_setx, block-switching/motion_sety, block-switching/motion_turnleft, block-switching/motion_turnright, block-switching/motion_xposition, block-switching/motion_yposition, block-switching/music_changeTempo, block-switching/music_setTempo, block-switching/operator_add, block-switching/operator_and, block-switching/operator_divide, block-switching/operator_equals, block-switching/operator_gt, block-switching/operator_lt, block-switching/operator_mod, block-switching/operator_multiply, block-switching/operator_or, block-switching/operator_subtract, block-switching/pen_changePenColorParamBy, block-switching/pen_changePenHueBy, block-switching/pen_changePenShadeBy, block-switching/pen_changePenSizeBy, block-switching/pen_penDown, block-switching/pen_penUp, block-switching/pen_setPenColorParamTo, block-switching/pen_setPenHueToNumber, block-switching/pen_setPenShadeToNumber, block-switching/pen_setPenSizeTo, block-switching/sensing_coloristouchingcolor, block-switching/sensing_mousex, block-switching/sensing_mousey, block-switching/sensing_touchingcolor, block-switching/sound_changeeffectby, block-switching/sound_changevolumeby, block-switching/sound_play, block-switching/sound_playuntildone, block-switching/sound_seteffectto, block-switching/sound_setvolumeto, copy-reporter/copy-to-clipboard, copy-reporter/copy-value, blocks2image/error_blocks_not_added, blocks2image/export_all_to_PNG, blocks2image/export_all_to_SVG, blocks2image/export_selected_to_PNG, blocks2image/export_selected_to_SVG, editor-extra-keys/enter-key, move-to-top-bottom/bottom, move-to-top-bottom/top, move-to-top-layer/move-to-front-layer, rename-broadcasts/RENAME_BROADCAST, rename-broadcasts/RENAME_BROADCAST_MODAL_TITLE, rename-broadcasts/RENAME_BROADCAST_TITLE, swap-local-global/cant-convert-cloud, swap-local-global/cant-convert-conflict, swap-local-global/cant-convert-stage, swap-local-global/cant-convert-to-local, swap-local-global/cant-convert-used-elsewhere, swap-local-global/edit, swap-local-global/edit-list-header, swap-local-global/edit-list-option, swap-local-global/edit-variable-header, swap-local-global/edit-variable-option, swap-local-global/to-global, swap-local-global/to-local, hide-stage/hide-stage, default */
/***/ (function(module) {

module.exports = JSON.parse("{\"_general/blocks/anticlockwise\":\"anti-clockwise\",\"_general/blocks/clockwise\":\"clockwise\",\"_general/blocks/green-flag\":\"flag\",\"editor-devtools/clean-plus\":\"Clean up Blocks +\",\"editor-devtools/copy-all\":\"Copy All\",\"editor-devtools/copy-block\":\"Copy Block\",\"editor-devtools/cut-block\":\"Cut Block\",\"editor-devtools/lists\":\"lists\",\"editor-devtools/make-space\":\"Make Space\",\"editor-devtools/orphaned\":\"{count, plural, one {Developer tools: Delete 1 orphaned reporter block?} other {Developer tools: Delete # orphaned reporter blocks?} }\",\"editor-devtools/paste\":\"Paste\",\"editor-devtools/replace\":\"Developer tools: Switch all {name} in this sprite for the variable named:\",\"editor-devtools/swap\":\"Swap {var} in Sprite\",\"editor-devtools/unused-list\":\"{count, plural, one {Developer tools: Delete 1 unused local list? Here it is:\\n} other {Developer tools: Delete # unused local lists? Here they are:\\n} }\",\"editor-devtools/unused-var\":\"{count, plural, one {Developer tools: Delete 1 unused local variable? Here it is:\\n} other {Developer tools: Delete # unused local variables? Here they are:\\n} }\",\"editor-devtools/var-not-exist\":\"That variable does not exist...\",\"editor-devtools/variables\":\"variables\",\"find-bar/complex-broadcast\":\"(expression)\",\"find-bar/event\":\"event {name}\",\"find-bar/find-placeholder\":\"Find (Ctrl+F)\",\"find-bar/list-global\":\"LIST {name}\",\"find-bar/list-local\":\"list {name}\",\"find-bar/var-global\":\"VAR {name}\",\"find-bar/var-local\":\"var {name}\",\"middle-click-popup/start-typing\":\"Start Typing...\",\"editor-searchable-dropdowns/createBroadcast\":\"Create message \\\"{name}\\\"\",\"editor-searchable-dropdowns/createGlobalList\":\"Create list \\\"{name}\\\" for all sprites\",\"editor-searchable-dropdowns/createGlobalVariable\":\"Create variable \\\"{name}\\\" for all sprites\",\"editor-searchable-dropdowns/createLocalList\":\"Create list \\\"{name}\\\" for this sprite only\",\"editor-searchable-dropdowns/createLocalVariable\":\"Create variable \\\"{name}\\\" for this sprite only\",\"data-category-tweaks-v2/for-all-sprites\":\"For all sprites:\",\"data-category-tweaks-v2/for-this-sprite-only\":\"For this sprite only:\",\"data-category-tweaks-v2/list-category\":\"Lists\",\"hide-flyout/lock\":\"Lock Palette\",\"hide-flyout/unlock\":\"Unlock Palette\",\"mediarecorder/cancel\":\"Cancel\",\"mediarecorder/click-flag\":\"Waiting...\",\"mediarecorder/click-flag-description\":\"Click the green flag to start recording. Click this button to stop.\",\"mediarecorder/option-title\":\"Record Options\",\"mediarecorder/record\":\"Record\",\"mediarecorder/record-after-flag\":\"Do not start recording until the Green Flag is clicked\",\"mediarecorder/record-audio\":\"Include project sounds\",\"mediarecorder/record-audio-description\":\"This does not include Text-to-Speech.\",\"mediarecorder/record-description\":\"Record the stage as a {extension} file. You can save it to your computer after the recording is finished.\\nNote: variable and list monitors will not be visible.\",\"mediarecorder/record-duration\":\"Record Duration (in seconds)\",\"mediarecorder/record-mic\":\"Include sounds from microphone\",\"mediarecorder/record-until-stop\":\"Stop recording after the project has stopped\",\"mediarecorder/record-until-stop-disabled\":\"You need to enable \\\"{afterFlagOption}\\\" to use this option.\",\"mediarecorder/start\":\"Start\",\"mediarecorder/start-delay\":\"Start Delay (in seconds)\",\"mediarecorder/starting-in\":\"Starting in {secs}...\",\"mediarecorder/stop\":\"Stop Recording\",\"debugger/block-breakpoint\":\"breakpoint\",\"debugger/block-error\":\"error %s\",\"debugger/block-log\":\"log %s\",\"debugger/block-warn\":\"warn %s\",\"debugger/cannot-pause-player\":\"Breakpoint block can only be used while on the editor.\",\"debugger/clear\":\"Clear\",\"debugger/clone-of\":\"Clone of {sprite}\",\"debugger/close\":\"Close\",\"debugger/console\":\"Logs\",\"debugger/debug\":\"Debug\",\"debugger/empty-string\":\"(empty string)\",\"debugger/enter-format\":\"Enter export format:\",\"debugger/export\":\"Export\",\"debugger/export-desc\":\"Click while holding Shift to customize export format.\",\"debugger/icon-error\":\"Error\",\"debugger/icon-warn\":\"Warning\",\"debugger/log-msg-broadcasted\":\"Broadcasted '{broadcast}'.\",\"debugger/log-msg-clone-cap\":\"Failed to create clone of '{sprite}', cannot create over 300 clones.\",\"debugger/log-msg-clone-created\":\"Created clone of '{sprite}'.\",\"debugger/log-msg-flag-clicked\":\"Green flag clicked.\",\"debugger/no-logs\":\"There are no logs to display.\",\"debugger/no-threads-running\":\"No threads running.\",\"debugger/performance-clonecount-graph-tooltip\":\"Clones: {clones}\",\"debugger/performance-clonecount-title\":\"Clones\",\"debugger/performance-framerate-graph-tooltip\":\"FPS: {fps}\",\"debugger/performance-framerate-title\":\"FPS\",\"debugger/step\":\"Step\",\"debugger/step-desc\":\"Executes one block.\",\"debugger/tab-logs\":\"Logs\",\"debugger/tab-performance\":\"Performance\",\"debugger/tab-threads\":\"Threads\",\"debugger/thread\":\"Thread {id}\",\"debugger/unknown-sprite\":\"(unknown sprite)\",\"debugger/unpause\":\"Resume\",\"pause/pause\":\"Pause\",\"pause/play\":\"Resume\",\"clones/clones\":\"clones: {cloneCount}\",\"color-picker/hex\":\"hex color\",\"remove-sprite-confirm/confirm\":\"Do you want to delete the sprite?\",\"block-count/blocks\":\"{num, plural, one {1 block} other {# blocks}}\",\"onion-skinning/behind\":\"Behind\",\"onion-skinning/front\":\"Front\",\"onion-skinning/layering\":\"Layering\",\"onion-skinning/merge\":\"Merge\",\"onion-skinning/mode\":\"Mode\",\"onion-skinning/next\":\"Next costumes\",\"onion-skinning/opacity\":\"Opacity (%)\",\"onion-skinning/opacityStep\":\"Opacity step (%)\",\"onion-skinning/previous\":\"Previous costumes\",\"onion-skinning/settings\":\"Onion Skinning Settings\",\"onion-skinning/tint\":\"Tint\",\"onion-skinning/toggle\":\"Toggle Onion Skinning\",\"paint-snap/boxCenter\":\"Center of selection\",\"paint-snap/boxCorners\":\"Corners of selection\",\"paint-snap/boxEdgeMids\":\"Selection edge midpoints\",\"paint-snap/objectCenters\":\"Centers of objects\",\"paint-snap/objectCorners\":\"Corners of objects\",\"paint-snap/objectEdges\":\"Edges of objects\",\"paint-snap/objectMidlines\":\"Midlines of objects\",\"paint-snap/off\":\"Off\",\"paint-snap/on\":\"On\",\"paint-snap/pageAxes\":\"Page x and y axes\",\"paint-snap/pageCenter\":\"Center of the page\",\"paint-snap/pageCorners\":\"Corners of the page\",\"paint-snap/pageEdges\":\"Edges of the page\",\"paint-snap/settings\":\"Snap Settings\",\"paint-snap/snapFrom\":\"Snap from:\",\"paint-snap/snapTo\":\"Snap to:\",\"paint-snap/threshold\":\"Snapping distance\",\"paint-snap/toggle\":\"Toggle Snapping\",\"2d-color-picker/shade\":\"Shade\",\"better-img-uploads/upload\":\"HD Upload\",\"variable-manager/for-all-sprites\":\"Variables for all sprites\",\"variable-manager/for-this-sprite\":\"Variables for this sprite\",\"variable-manager/search\":\"Search\",\"variable-manager/too-big\":\"Click to display very large value.\",\"variable-manager/variables\":\"Variables\",\"search-sprites/placeholder\":\"Search sprites...\",\"sprite-properties/close-properties-panel-tooltip\":\"Collapse properties panel\",\"sprite-properties/open-properties-panel-tooltip\":\"Open properties panel\",\"gamepad/axes-a-b\":\"Axes {a} & {b}\",\"gamepad/axis-arrows\":\"Arrow Keys\",\"gamepad/axis-cursor\":\"Cursor\",\"gamepad/axis-custom\":\"Custom\",\"gamepad/axis-none\":\"None\",\"gamepad/browser-support\":\"This browser and operating system have known bugs that may make this addon difficult to use. Try another browser if you encounter problems.\",\"gamepad/button-n\":\"Button {n}\",\"gamepad/clear\":\"Clear all controls\",\"gamepad/config-header\":\"This comment contains configuration for gamepad support in third-party tools or websites such as https://turbowarp.org/\\nDo not edit by hand\",\"gamepad/key-click\":\"Click\",\"gamepad/key-down\":\"Down\",\"gamepad/key-enter\":\"Enter\",\"gamepad/key-left\":\"Left\",\"gamepad/key-none\":\"(none)\",\"gamepad/key-right\":\"Right\",\"gamepad/key-space\":\"Space\",\"gamepad/key-up\":\"Up\",\"gamepad/keyinput-title\":\"Click and press a key or click to change button. Escape to cancel. Backspace or delete to clear.\",\"gamepad/no-controllers\":\"No controllers detected. Try plugging one in and pressing a button on it.\",\"gamepad/reset\":\"Reset all controls to project defaults\",\"gamepad/settings\":\"Gamepad Settings\",\"gamepad/store-in-project\":\"Store the mappings set above inside the project. After saving the project, these mappings will become the new default configuration.\",\"folders/add-to-folder\":\"add to folder: {folder}\",\"folders/closed-folder\":\"Folder\",\"folders/confirm-backpack-folder\":\"Save entire folder to backpack?\",\"folders/create-folder\":\"create folder\",\"folders/name-not-allowed\":\"Invalid folder name\",\"folders/name-prompt\":\"Name of folder:\",\"folders/name-prompt-title\":\"Create Folder\",\"folders/open-folder\":\"Opened\",\"folders/remove-folder\":\"remove folder\",\"folders/remove-from-folder\":\"remove from folder\",\"folders/rename-folder\":\"rename folder\",\"folders/rename-folder-prompt\":\"Rename folder to:\",\"folders/rename-folder-prompt-title\":\"Rename Folder\",\"block-switching/control_forever\":\"forever\",\"block-switching/control_if\":\"if\",\"block-switching/control_if_else\":\"if... else\",\"block-switching/control_repeat_until\":\"repeat until\",\"block-switching/control_wait_until\":\"wait until\",\"block-switching/data_changevariableby\":\"change variable\",\"block-switching/data_deletealloflist\":\"delete all\",\"block-switching/data_deleteoflist\":\"delete item\",\"block-switching/data_hidelist\":\"hide list\",\"block-switching/data_hidevariable\":\"hide variable\",\"block-switching/data_insertatlist\":\"insert item\",\"block-switching/data_replaceitemoflist\":\"replace item\",\"block-switching/data_setvariableto\":\"set variable\",\"block-switching/data_showlist\":\"show list\",\"block-switching/data_showvariable\":\"show variable\",\"block-switching/debugger_error\":\"error\",\"block-switching/debugger_log\":\"log\",\"block-switching/debugger_warn\":\"warn\",\"block-switching/event_broadcast\":\"broadcast\",\"block-switching/event_broadcastandwait\":\"broadcast and wait\",\"block-switching/looks_backdropnumbername\":\"backdrop number or name\",\"block-switching/looks_changeeffectby\":\"change effect\",\"block-switching/looks_changesizeby\":\"change size\",\"block-switching/looks_costumenumbername\":\"costume number or name\",\"block-switching/looks_goforwardbackwardlayers\":\"go forward or backward layers\",\"block-switching/looks_gotofrontback\":\"go to front or back layer\",\"block-switching/looks_hide\":\"hide\",\"block-switching/looks_nextbackdrop\":\"next backdrop\",\"block-switching/looks_nextcostume\":\"next costume\",\"block-switching/looks_say\":\"say\",\"block-switching/looks_sayforsecs\":\"say for seconds\",\"block-switching/looks_seteffectto\":\"set effect\",\"block-switching/looks_setsizeto\":\"set size\",\"block-switching/looks_show\":\"show\",\"block-switching/looks_switchbackdropto\":\"switch backdrop\",\"block-switching/looks_switchbackdroptoandwait\":\"switch backdrop and wait\",\"block-switching/looks_think\":\"think\",\"block-switching/looks_thinkforsecs\":\"think for seconds\",\"block-switching/motion_changexby\":\"change x\",\"block-switching/motion_changeyby\":\"change y\",\"block-switching/motion_setx\":\"set x\",\"block-switching/motion_sety\":\"set y\",\"block-switching/motion_turnleft\":\"turn left\",\"block-switching/motion_turnright\":\"turn right\",\"block-switching/motion_xposition\":\"x position\",\"block-switching/motion_yposition\":\"y position\",\"block-switching/music_changeTempo\":\"change tempo\",\"block-switching/music_setTempo\":\"set tempo\",\"block-switching/operator_add\":\"+\",\"block-switching/operator_and\":\"and\",\"block-switching/operator_divide\":\"/\",\"block-switching/operator_equals\":\"=\",\"block-switching/operator_gt\":\">\",\"block-switching/operator_lt\":\"<\",\"block-switching/operator_mod\":\"mod\",\"block-switching/operator_multiply\":\"*\",\"block-switching/operator_or\":\"or\",\"block-switching/operator_subtract\":\"-\",\"block-switching/pen_changePenColorParamBy\":\"change parameter\",\"block-switching/pen_changePenHueBy\":\"change hue\",\"block-switching/pen_changePenShadeBy\":\"change shade\",\"block-switching/pen_changePenSizeBy\":\"change size\",\"block-switching/pen_penDown\":\"pen down\",\"block-switching/pen_penUp\":\"pen up\",\"block-switching/pen_setPenColorParamTo\":\"set parameter\",\"block-switching/pen_setPenHueToNumber\":\"set hue\",\"block-switching/pen_setPenShadeToNumber\":\"set shade\",\"block-switching/pen_setPenSizeTo\":\"set size\",\"block-switching/sensing_coloristouchingcolor\":\"color touching color\",\"block-switching/sensing_mousex\":\"mouse x\",\"block-switching/sensing_mousey\":\"mouse y\",\"block-switching/sensing_touchingcolor\":\"touching color\",\"block-switching/sound_changeeffectby\":\"change effect\",\"block-switching/sound_changevolumeby\":\"change volume\",\"block-switching/sound_play\":\"start\",\"block-switching/sound_playuntildone\":\"play until done\",\"block-switching/sound_seteffectto\":\"set effect\",\"block-switching/sound_setvolumeto\":\"set volume\",\"copy-reporter/copy-to-clipboard\":\"Copy\",\"copy-reporter/copy-value\":\"copy value\",\"blocks2image/error_blocks_not_added\":\"Add blocks to workspace!\",\"blocks2image/export_all_to_PNG\":\"Export all as PNG\",\"blocks2image/export_all_to_SVG\":\"Export all as SVG\",\"blocks2image/export_selected_to_PNG\":\"Export block as PNG\",\"blocks2image/export_selected_to_SVG\":\"Export block as SVG\",\"editor-extra-keys/enter-key\":\"enter\",\"move-to-top-bottom/bottom\":\"move to bottom\",\"move-to-top-bottom/top\":\"move to top\",\"move-to-top-layer/move-to-front-layer\":\"move to front layer\",\"rename-broadcasts/RENAME_BROADCAST\":\"Rename message\",\"rename-broadcasts/RENAME_BROADCAST_MODAL_TITLE\":\"Rename Message\",\"rename-broadcasts/RENAME_BROADCAST_TITLE\":\"Rename all \\\"{name}\\\" messages to:\",\"swap-local-global/cant-convert-cloud\":\"Cloud variables can't be converted to this sprite only.\",\"swap-local-global/cant-convert-conflict\":\"Can't convert because it would conflict with variables in another sprite: {sprites}\",\"swap-local-global/cant-convert-stage\":\"The stage can't have variables for this sprite only.\",\"swap-local-global/cant-convert-to-local\":\"Can't convert because it's used by multiple sprites: {sprites}\",\"swap-local-global/cant-convert-used-elsewhere\":\"Can't convert because it's used by another sprite: {sprite}\",\"swap-local-global/edit\":\"Edit properties:\",\"swap-local-global/edit-list-header\":\"Edit List\",\"swap-local-global/edit-list-option\":\"Rename or edit list\",\"swap-local-global/edit-variable-header\":\"Edit Variable\",\"swap-local-global/edit-variable-option\":\"Rename or edit variable\",\"swap-local-global/to-global\":\"Convert to \\\"For all sprites\\\"\",\"swap-local-global/to-local\":\"Convert to \\\"For this sprite only\\\"\",\"hide-stage/hide-stage\":\"Hide stage\"}");

/***/ }),

/***/ "./src/addons/addons/debugger/module.js":
/*!**********************************************!*\
  !*** ./src/addons/addons/debugger/module.js ***!
  \**********************************************/
/*! exports provided: isPaused, setPaused, onPauseChanged, onSingleStep, getRunningThread, singleStep, setup */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isPaused", function() { return isPaused; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setPaused", function() { return setPaused; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "onPauseChanged", function() { return onPauseChanged; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "onSingleStep", function() { return onSingleStep; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getRunningThread", function() { return getRunningThread; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "singleStep", function() { return singleStep; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setup", function() { return setup; });
/* harmony import */ var _event_target_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../event-target.js */ "./src/addons/event-target.js");
function _createForOfIteratorHelper(r, e) { var t = "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (!t) { if (Array.isArray(r) || (t = _unsupportedIterableToArray(r)) || e && r && "number" == typeof r.length) { t && (r = t); var _n = 0, F = function F() {}; return { s: F, n: function n() { return _n >= r.length ? { done: !0 } : { done: !1, value: r[_n++] }; }, e: function e(r) { throw r; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var o, a = !0, u = !1; return { s: function s() { t = t.call(r); }, n: function n() { var r = t.next(); return a = r.done, r; }, e: function e(r) { u = !0, o = r; }, f: function f() { try { a || null == t["return"] || t["return"](); } finally { if (u) throw o; } } }; }
function _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }
function _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
 /* inserted by pull.js */

// https://github.com/scratchfoundation/scratch-vm/blob/bb352913b57991713a5ccf0b611fda91056e14ec/src/engine/thread.js#L198
var STATUS_RUNNING = 0;
var STATUS_PROMISE_WAIT = 1;
var STATUS_YIELD = 2;
var STATUS_YIELD_TICK = 3;
var STATUS_DONE = 4;
var REACT_INTERNAL_PREFIX = "__reactInternalInstance$";
var vm;
var paused = false;
var pausedThreadState = new WeakMap();
var pauseNewThreads = false;
var steppingThread = null;
var eventTarget = new _event_target_js__WEBPACK_IMPORTED_MODULE_0__["default"]();
var audioContextStateChange = Promise.resolve();
var isPaused = function isPaused() {
  return paused;
};
var pauseThread = function pauseThread(thread) {
  if (thread.updateMonitor || pausedThreadState.has(thread)) {
    // Thread is already paused or shouldn't be paused.
    return;
  }
  var pauseState = {
    time: vm.runtime.currentMSecs,
    status: thread.status
  };
  pausedThreadState.set(thread, pauseState);

  // Pausing a thread now works by just setting its status to STATUS_PROMISE_WAIT.
  // At the start of each frame, we make sure each paused thread is still paused.
  // This is really the best way to implement this.
  // Converting thread.status into a getter/setter causes Scratch's sequencer to permanently
  //    perform significantly slower in some projects. I think this is because it causes some
  //    very hot functions to be deoptimized.
  // Trapping sequencer.stepThread to no-op for a paused thread causes Scratch's sequencer
  //    to waste 24ms of CPU time every frame because it thinks a thread is running.
  thread.status = STATUS_PROMISE_WAIT;
};
var ensurePausedThreadIsStillPaused = function ensurePausedThreadIsStillPaused(thread) {
  if (thread.status === STATUS_DONE) {
    // If a paused thread is finished by single stepping, let it keep being done.
    return;
  }
  var pauseState = pausedThreadState.get(thread);
  if (pauseState) {
    if (thread.status !== STATUS_PROMISE_WAIT) {
      // We'll record the change so we can properly resume the thread, but the thread must still be paused for now.
      pauseState.status = thread.status;
      thread.status = STATUS_PROMISE_WAIT;
    }
  }
};
var setSteppingThread = function setSteppingThread(thread) {
  steppingThread = thread;
};
var compensateForTimePassedWhilePaused = function compensateForTimePassedWhilePaused(thread, pauseState) {
  // TW: Compiled threads store their timer in a different place.
  if (thread.timer) {
    thread.timer.startTime += vm.runtime.currentMSecs - pauseState.time;
  }
  if (thread.compatibilityStackFrame && thread.compatibilityStackFrame.timer) {
    thread.compatibilityStackFrame.timer.startTime += vm.runtime.currentMSecs - pauseState.time;
  }
  var stackFrame = thread.peekStackFrame();
  if (stackFrame && stackFrame.executionContext && stackFrame.executionContext.timer) {
    stackFrame.executionContext.timer.startTime += vm.runtime.currentMSecs - pauseState.time;
  }
};
var stepUnsteppedThreads = function stepUnsteppedThreads(lastSteppedThread) {
  // If we paused in the middle of a tick, we need to make sure to step the scripts that didn't get
  // stepped in that tick to avoid affecting project behavior.
  var threads = vm.runtime.threads;
  var startingIndex = getThreadIndex(lastSteppedThread);
  if (startingIndex !== -1) {
    for (var i = startingIndex; i < threads.length; i++) {
      var thread = threads[i];
      var status = thread.status;
      if (status === STATUS_RUNNING || status === STATUS_YIELD || status === STATUS_YIELD_TICK) {
        vm.runtime.sequencer.activeThread = thread;
        vm.runtime.sequencer.stepThread(thread);
      }
    }
  }
};
var setPaused = function setPaused(_paused) {
  var didChange = paused !== _paused;
  if (didChange) {
    paused = _paused;
    eventTarget.dispatchEvent(new CustomEvent("change"));

    // TW: events for extensions
    if (paused) {
      vm.runtime.emit("RUNTIME_PAUSED");
    } else {
      vm.runtime.emit("RUNTIME_UNPAUSED");
    }
  }

  // Don't check didChange as new threads could've started that we need to pause.
  if (paused) {
    audioContextStateChange = audioContextStateChange.then(function () {
      return vm.runtime.audioEngine.audioContext.suspend();
    });
    if (!vm.runtime.ioDevices.clock._paused) {
      vm.runtime.ioDevices.clock.pause();
    }
    vm.runtime.threads.forEach(pauseThread);
    var activeThread = vm.runtime.sequencer.activeThread;
    if (activeThread) {
      setSteppingThread(activeThread);
      eventTarget.dispatchEvent(new CustomEvent("step"));
    }
  }

  // Only run unpausing logic when pause state changed to avoid unnecessary work
  if (!paused && didChange) {
    audioContextStateChange = audioContextStateChange.then(function () {
      return vm.runtime.audioEngine.audioContext.resume();
    });
    vm.runtime.ioDevices.clock.resume();
    var _iterator = _createForOfIteratorHelper(vm.runtime.threads),
      _step;
    try {
      for (_iterator.s(); !(_step = _iterator.n()).done;) {
        var thread = _step.value;
        var pauseState = pausedThreadState.get(thread);
        if (pauseState) {
          compensateForTimePassedWhilePaused(thread, pauseState);
          thread.status = pauseState.status;
        }
      }
    } catch (err) {
      _iterator.e(err);
    } finally {
      _iterator.f();
    }
    pausedThreadState = new WeakMap();
    var lastSteppedThread = steppingThread;
    // This must happen after the "change" event is fired to fix https://github.com/ScratchAddons/ScratchAddons/issues/4281
    stepUnsteppedThreads(lastSteppedThread);
    steppingThread = null;
  }
};
var onPauseChanged = function onPauseChanged(listener) {
  eventTarget.addEventListener("change", function () {
    return listener(paused);
  });
};
var onSingleStep = function onSingleStep(listener) {
  eventTarget.addEventListener("step", listener);
};
var getRunningThread = function getRunningThread() {
  return steppingThread;
};

// A modified version of this function
// https://github.com/scratchfoundation/scratch-vm/blob/0e86a78a00db41af114df64255e2cd7dd881329f/src/engine/sequencer.js#L179
// Returns if we should continue executing this thread.
var singleStepThread = function singleStepThread(thread) {
  if (thread.status === STATUS_DONE) {
    return false;
  }
  // TW: Can't single-step compiled threads
  if (thread.isCompiled) {
    return false;
  }
  var currentBlockId = thread.peekStack();
  if (!currentBlockId) {
    thread.popStack();
    if (thread.stack.length === 0) {
      thread.status = STATUS_DONE;
      return false;
    }
  }
  pauseNewThreads = true;
  vm.runtime.sequencer.activeThread = thread;

  /*
    We need to call execute(this, thread) like the original sequencer. We don't
    have access to that method, so we need to force the original stepThread to run
    execute for us then exit before it tries to run more blocks.
    So, we make `thread.blockGlowInFrame = ...` throw an exception, so this line:
    https://github.com/scratchfoundation/scratch-vm/blob/bb352913b57991713a5ccf0b611fda91056e14ec/src/engine/sequencer.js#L214
    will end the function early. We then have to set it back to normal afterward.
     Why are we here just to suffer?
  */
  var specialError = ["special error used by Scratch Addons for implementing single-stepping"];
  Object.defineProperty(thread, "blockGlowInFrame", {
    set: function set(_block) {
      throw specialError;
    }
  });
  try {
    thread.status = STATUS_RUNNING;

    // Restart the warp timer on each step.
    // If we don't do this, Scratch will think a lot of time has passed and may yield this thread.
    if (thread.warpTimer) {
      thread.warpTimer.start();
    }
    try {
      vm.runtime.sequencer.stepThread(thread);
    } catch (err) {
      if (err !== specialError) throw err;
    }
    if (thread.status !== STATUS_RUNNING) {
      return false;
    }
    if (thread.peekStack() === currentBlockId) {
      thread.goToNextBlock();
    }
    while (!thread.peekStack()) {
      thread.popStack();
      if (thread.stack.length === 0) {
        thread.status = STATUS_DONE;
        return false;
      }
      var stackFrame = thread.peekStackFrame();
      if (stackFrame.isLoop) {
        if (thread.peekStackFrame().warpMode) {
          continue;
        } else {
          return false;
        }
      } else if (stackFrame.waitingReporter) {
        return false;
      }
      thread.goToNextBlock();
    }
    return true;
  } finally {
    pauseNewThreads = false;
    vm.runtime.sequencer.activeThread = null;
    Object.defineProperty(thread, "blockGlowInFrame", {
      value: currentBlockId,
      configurable: true,
      enumerable: true,
      writable: true
    });

    // Strictly this doesn't seem to be necessary, but let's make sure the thread is still paused after we step it.
    if (thread.status !== STATUS_DONE) {
      thread.status = STATUS_PROMISE_WAIT;
    }
  }
};
var getRealStatus = function getRealStatus(thread) {
  var pauseState = pausedThreadState.get(thread);
  if (pauseState) {
    return pauseState.status;
  }
  return thread.status;
};
var getThreadIndex = function getThreadIndex(thread) {
  // We can't use vm.runtime.threads.indexOf(thread) because threads can be restarted.
  // This can happens when, for example, a "when I receive message1" script broadcasts message1.
  // The object in runtime.threads is replaced when this happens.
  if (!thread) return -1;
  return vm.runtime.threads.findIndex(function (otherThread) {
    return otherThread.target === thread.target && otherThread.topBlock === thread.topBlock && otherThread.stackClick === thread.stackClick && otherThread.updateMonitor === thread.updateMonitor;
  });
};
var findNewSteppingThread = function findNewSteppingThread(startingIndex) {
  var threads = vm.runtime.threads;
  for (var i = startingIndex; i < threads.length; i++) {
    var possibleNewThread = threads[i];
    if (possibleNewThread.updateMonitor) {
      // Never single-step monitor update threads.
      continue;
    }
    // TW: Can't single-step compiled threads
    if (possibleNewThread.isCompiled) {
      continue;
    }
    var status = getRealStatus(possibleNewThread);
    if (status === STATUS_RUNNING || status === STATUS_YIELD || status === STATUS_YIELD_TICK) {
      // Thread must not be running for single stepping to work.
      pauseThread(possibleNewThread);
      return possibleNewThread;
    }
  }
  return null;
};
var singleStep = function singleStep() {
  if (steppingThread) {
    var pauseState = pausedThreadState.get(steppingThread);
    // We can assume pauseState is defined as any single stepping threads must already be paused.

    // Make it look like no time has passed
    compensateForTimePassedWhilePaused(steppingThread, pauseState);
    pauseState.time = vm.runtime.currentMSecs;

    // Execute the block
    var continueExecuting = singleStepThread(steppingThread);
    if (!continueExecuting) {
      // Try to move onto the next thread
      steppingThread = findNewSteppingThread(getThreadIndex(steppingThread) + 1);
    }
  }

  // If we don't have a thread, than we are between VM steps and should search for a new thread
  if (!steppingThread) {
    setSteppingThread(findNewSteppingThread(0));

    // End of VM step, emulate one frame of time passing.
    vm.runtime.ioDevices.clock._pausedTime += vm.runtime.currentStepTime;
    // Skip all sounds forward by vm.runtime.currentStepTime milliseconds so it's as
    //  if they where playing for one frame.
    var audioContext = vm.runtime.audioEngine.audioContext;
    var _iterator2 = _createForOfIteratorHelper(vm.runtime.targets),
      _step2;
    try {
      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
        var target = _step2.value;
        for (var _i = 0, _Object$keys = Object.keys(target.sprite.soundBank.soundPlayers); _i < _Object$keys.length; _i++) {
          var soundId = _Object$keys[_i];
          var soundPlayer = target.sprite.soundBank.soundPlayers[soundId];
          if (soundPlayer.outputNode) {
            soundPlayer.outputNode.stop(audioContext.currentTime);
            soundPlayer._createSource();
            soundPlayer.outputNode.start(audioContext.currentTime, audioContext.currentTime - soundPlayer.startingUntil + vm.runtime.currentStepTime / 1000);
            soundPlayer.startingUntil -= vm.runtime.currentStepTime / 1000;
          }
        }
      }
      // Move all threads forward one frame in time. For blocks like `wait () seconds`
    } catch (err) {
      _iterator2.e(err);
    } finally {
      _iterator2.f();
    }
    var _iterator3 = _createForOfIteratorHelper(vm.runtime.threads),
      _step3;
    try {
      for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
        var thread = _step3.value;
        if (pausedThreadState.has(thread)) {
          pausedThreadState.get(thread).time += vm.runtime.currentStepTime;
        }
      }

      // Try to run edge activated hats
    } catch (err) {
      _iterator3.e(err);
    } finally {
      _iterator3.f();
    }
    pauseNewThreads = true;
    var hats = vm.runtime._hats;
    for (var hatType in hats) {
      if (!Object.prototype.hasOwnProperty.call(hats, hatType)) continue;
      var hat = hats[hatType];
      if (hat.edgeActivated) {
        vm.runtime.startHats(hatType);
      }
    }
    pauseNewThreads = false;
  }
  eventTarget.dispatchEvent(new CustomEvent("step"));
};
var setup = function setup(addon) {
  if (vm) {
    return;
  }
  vm = addon.tab.traps.vm;
  var originalStepThreads = vm.runtime.sequencer.stepThreads;
  vm.runtime.sequencer.stepThreads = function () {
    if (isPaused()) {
      var _iterator4 = _createForOfIteratorHelper(this.runtime.threads),
        _step4;
      try {
        for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {
          var thread = _step4.value;
          ensurePausedThreadIsStillPaused(thread);
        }
      } catch (err) {
        _iterator4.e(err);
      } finally {
        _iterator4.f();
      }
    }
    return originalStepThreads.call(this);
  };

  // Unpause when green flag
  var originalGreenFlag = vm.runtime.greenFlag;
  vm.runtime.greenFlag = function () {
    setPaused(false);
    return originalGreenFlag.call(this);
  };

  // Disable edge-activated hats and hats like "when key pressed" while paused.
  var originalStartHats = vm.runtime.startHats;
  vm.runtime.startHats = function () {
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    var hat = args[0];
    // These hats can be manually started by the user when paused or while single stepping.
    var isUserInitiated = hat === "event_whenbroadcastreceived" || hat === "control_start_as_clone";
    if (pauseNewThreads) {
      if (!isUserInitiated && !this.getIsEdgeActivatedHat(hat)) {
        return [];
      }
      var newThreads = originalStartHats.apply(this, args);
      var _iterator5 = _createForOfIteratorHelper(newThreads),
        _step5;
      try {
        for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {
          var thread = _step5.value;
          pauseThread(thread);
        }
      } catch (err) {
        _iterator5.e(err);
      } finally {
        _iterator5.f();
      }
      return newThreads;
    } else if (paused && !isUserInitiated) {
      return [];
    }
    return originalStartHats.apply(this, args);
  };

  // Paused threads should not be counted as running when updating GUI state.
  var originalGetMonitorThreadCount = vm.runtime._getMonitorThreadCount;
  vm.runtime._getMonitorThreadCount = function (threads) {
    var count = originalGetMonitorThreadCount.call(this, threads);
    if (paused) {
      var _iterator6 = _createForOfIteratorHelper(threads),
        _step6;
      try {
        for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {
          var thread = _step6.value;
          if (pausedThreadState.has(thread)) {
            count++;
          }
        }
      } catch (err) {
        _iterator6.e(err);
      } finally {
        _iterator6.f();
      }
    }
    return count;
  };
};

/***/ }),

/***/ "./src/addons/addons/drag-drop/_runtime_entry.js":
/*!*******************************************************!*\
  !*** ./src/addons/addons/drag-drop/_runtime_entry.js ***!
  \*******************************************************/
/*! exports provided: resources */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "resources", function() { return resources; });
/* harmony import */ var _userscript_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./userscript.js */ "./src/addons/addons/drag-drop/userscript.js");
/* generated by pull.js */

var resources = {
  "userscript.js": _userscript_js__WEBPACK_IMPORTED_MODULE_0__["default"]
};

/***/ }),

/***/ "./src/addons/addons/drag-drop/userscript.js":
/*!***************************************************!*\
  !*** ./src/addons/addons/drag-drop/userscript.js ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _createForOfIteratorHelper(r, e) { var t = "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (!t) { if (Array.isArray(r) || (t = _unsupportedIterableToArray(r)) || e && r && "number" == typeof r.length) { t && (r = t); var _n = 0, F = function F() {}; return { s: F, n: function n() { return _n >= r.length ? { done: !0 } : { done: !1, value: r[_n++] }; }, e: function e(r) { throw r; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var o, a = !0, u = !1; return { s: function s() { t = t.call(r); }, n: function n() { var r = t.next(); return a = r.done, r; }, e: function e(r) { u = !0, o = r; }, f: function f() { try { a || null == t["return"] || t["return"](); } finally { if (u) throw o; } } }; }
function _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }
function _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
/* harmony default export */ __webpack_exports__["default"] = (function (_x) {
  return _ref2.apply(this, arguments);
});
function _ref2() {
  _ref2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(_ref) {
    var addon, console, currentDraggingElement, allAnimations, FORWARD, REVERSE, animateElement, nativeInputValueSetter, reactAwareSetValue, globalHandleDragOver;
    return _regeneratorRuntime().wrap(function _callee2$(_context2) {
      while (1) switch (_context2.prev = _context2.next) {
        case 0:
          addon = _ref.addon, console = _ref.console;
          /** @type {HTMLElement|null} */
          currentDraggingElement = null;
          /** @type {WeakMap<HTMLElement, Animation>} */
          allAnimations = new WeakMap();
          FORWARD = 1;
          REVERSE = -1;
          /**
           * @param {HTMLElement} element
           * @param {number} direction
           * @returns {Animation}
           */
          animateElement = function animateElement(element, direction) {
            /** @type {Animation} */
            var animation;
            if (allAnimations.has(element)) {
              animation = allAnimations.get(element);
            } else {
              animation = element.animate([{
                // this object intentionally empty so the element animates from whatever its default value
                // is in CSS.
              }, {
                backgroundColor: "hsla(0, 100%, 77%, 1)"
              }], {
                duration: 250,
                fill: "forwards",
                easing: "ease"
              });
              allAnimations.set(element, animation);
            }
            animation.playbackRate = direction;
          };
          nativeInputValueSetter = Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype, "value").set;
          reactAwareSetValue = function reactAwareSetValue(el, value) {
            nativeInputValueSetter.call(el, value);
            el.dispatchEvent(new Event("change", {
              bubbles: true
            }));
          };
          globalHandleDragOver = function globalHandleDragOver(e) {
            if (addon.self.disabled) return;
            if (!e.dataTransfer.types.includes("Files")) {
              return;
            }
            var el;
            var callback;
            if ((el = e.target.closest('div[class*="sprite-selector_sprite-selector"]')) || (el = e.target.closest('div[class*="stage-selector_stage-selector"]')) || (el = e.target.closest('div[class*="selector_wrapper"]'))) {
              callback = function callback(files) {
                var hdFilter = addon.settings.get("use-hd-upload") ? "" : ":not(.sa-better-img-uploads-input)";
                var fileInput = el.querySelector('input[class*="action-menu_file-input"]' + hdFilter);
                fileInput.files = files;
                fileInput.dispatchEvent(new Event("change", {
                  bubbles: true
                }));
              };
            } else if (el = e.target.closest('div[class*="monitor_list-monitor"]')) {
              callback = function callback(files) {
                var contextMenuBefore = document.querySelector("body > .react-contextmenu.react-contextmenu--visible");
                // Simulate a right click on the list monitor
                el.dispatchEvent(new MouseEvent("contextmenu", {
                  bubbles: true
                }));
                // Get the right click menu that opened (monitor context menus are
                // children of <body>)
                var contextMenuAfter = document.querySelector("body > .react-contextmenu.react-contextmenu--visible");
                // `contextMenuAfter` is only null if the context menu was already open
                // for the list monitor, in which case we can use the context menu from
                // before the simulated right click
                var contextMenu = contextMenuAfter === null ? contextMenuBefore : contextMenuAfter;
                // Sometimes the menu flashes open, so force hide it.
                contextMenu.style.display = "none";
                // Override DOM methods to import the text file directly
                // See: https://github.com/scratchfoundation/scratch-gui/blob/develop/src/lib/import-csv.js#L21-L22
                var appendChild = document.body.appendChild;
                document.body.appendChild = function (fileInput) {
                  // Restore appendChild to <body>
                  document.body.appendChild = appendChild;
                  if (fileInput instanceof HTMLInputElement) {
                    document.body.appendChild(fileInput);
                    // Prevent Scratch from opening the file input dialog
                    fileInput.click = function () {};
                    // Insert files from the drop event into the file input
                    fileInput.files = files;
                    fileInput.dispatchEvent(new Event("change"));
                    window.requestAnimationFrame(function () {
                      window.requestAnimationFrame(function () {
                        contextMenu.style.display = null;
                        contextMenu.style.opacity = 0;
                        contextMenu.style.pointerEvents = "none";
                      });
                    });
                  } else {
                    // The next call for `appendChild` SHOULD be the file input, but if
                    // it's not, then make `appendChild` behave as normal.
                    console.error('File input was not immediately given to appendChild upon clicking "Import"!');
                    return appendChild(fileInput);
                  }
                };
                // Simulate clicking on the "Import" option
                contextMenu.children[0].click();
              };
            } else if (el = e.target.closest('div[class*="question_question-input"] > input[class*="input_input-form_l9eYg"]')) {
              callback = /*#__PURE__*/function () {
                var _ref3 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(files) {
                  var text, selectionStart;
                  return _regeneratorRuntime().wrap(function _callee$(_context) {
                    while (1) switch (_context.prev = _context.next) {
                      case 0:
                        _context.next = 2;
                        return Promise.all(Array.from(files, function (file) {
                          return file.text();
                        }));
                      case 2:
                        text = _context.sent.join("").replace(/[\r\n]+$/, "").replace(/\r?\n|\r/g, " ");
                        selectionStart = el.selectionStart;
                        reactAwareSetValue(el, el.value.slice(0, selectionStart) + text + el.value.slice(el.selectionEnd));
                        el.setSelectionRange(selectionStart, selectionStart + text.length);
                      case 6:
                      case "end":
                        return _context.stop();
                    }
                  }, _callee);
                }));
                return function callback(_x2) {
                  return _ref3.apply(this, arguments);
                };
              }();
            }
            if (!el) {
              return;
            }
            e.preventDefault();
            if (el === currentDraggingElement) {
              return;
            }
            currentDraggingElement = el;

            /** @type {HTMLElement[]} */
            var elementsToAnimate = [el, el.querySelector('div[class*="stage-selector_header_"]'), el.querySelector('div[class*="sprite-info_sprite-info"]'), el.querySelector('div[class*="monitor_list-body"]')].filter(function (i) {
              return i;
            });
            var _iterator = _createForOfIteratorHelper(elementsToAnimate),
              _step;
            try {
              for (_iterator.s(); !(_step = _iterator.n()).done;) {
                var _el2 = _step.value;
                animateElement(_el2, FORWARD);
              }
            } catch (err) {
              _iterator.e(err);
            } finally {
              _iterator.f();
            }
            var handleDrop = function handleDrop(e) {
              e.preventDefault();
              cleanup();
              if (e.dataTransfer.types.includes("Files") && e.dataTransfer.files.length > 0) {
                callback(e.dataTransfer.files);
              }
            };
            var handleDragOver = function handleDragOver(e) {
              e.preventDefault();
              e.dataTransfer.dropEffect = "copy";
            };
            e.dataTransfer.dropEffect = "copy";
            var handleDragLeave = function handleDragLeave(e) {
              e.preventDefault();
              cleanup();
            };
            var cleanup = function cleanup() {
              currentDraggingElement = null;
              el.removeEventListener("dragover", handleDragOver);
              el.removeEventListener("dragleave", handleDragLeave);
              el.removeEventListener("drop", handleDrop);
              var _iterator2 = _createForOfIteratorHelper(elementsToAnimate),
                _step2;
              try {
                for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
                  var _el = _step2.value;
                  animateElement(_el, REVERSE);
                }
              } catch (err) {
                _iterator2.e(err);
              } finally {
                _iterator2.f();
              }
            };
            el.addEventListener("dragover", handleDragOver);
            el.addEventListener("dragleave", handleDragLeave);
            el.addEventListener("drop", handleDrop);
          };
          document.addEventListener("dragover", globalHandleDragOver, {
            useCapture: true
          });
        case 10:
        case "end":
          return _context2.stop();
      }
    }, _callee2);
  }));
  return _ref2.apply(this, arguments);
}

/***/ }),

/***/ "./src/addons/addons/find-bar/blockly/BlockFlasher.js":
/*!************************************************************!*\
  !*** ./src/addons/addons/find-bar/blockly/BlockFlasher.js ***!
  \************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return BlockFlasher; });
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
/**
 * Helper class to flash a Blockly scratch block in the users workspace
 */
var BlockFlasher = /*#__PURE__*/function () {
  function BlockFlasher() {
    _classCallCheck(this, BlockFlasher);
  }
  return _createClass(BlockFlasher, null, [{
    key: "flash",
    value:
    /**
     * FLash a block 3 times
     * @param block the block to flash
     */
    function flash(block) {
      if (myFlash.timerID > 0) {
        clearTimeout(myFlash.timerID);
        if (myFlash.block.svgPath_) {
          myFlash.block.svgPath_.style.fill = "";
        }
      }
      var count = 4;
      var flashOn = true;
      myFlash.block = block;

      /**
       * Internal method to switch the colour of a block between light yellow and it's original colour
       * @private
       */
      function _flash() {
        if (myFlash.block.svgPath_) {
          myFlash.block.svgPath_.style.fill = flashOn ? "#ffff80" : "";
        }
        flashOn = !flashOn;
        count--;
        if (count > 0) {
          myFlash.timerID = setTimeout(_flash, 200);
        } else {
          myFlash.timerID = 0;
          myFlash.block = null;
        }
      }
      _flash();
    }
  }]);
}();

var myFlash = {
  block: null,
  timerID: null
};

/***/ }),

/***/ "./src/addons/addons/find-bar/blockly/BlockInstance.js":
/*!*************************************************************!*\
  !*** ./src/addons/addons/find-bar/blockly/BlockInstance.js ***!
  \*************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return BlockInstance; });
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
/**
 * Encapsulates a block (either in this sprite or another / Blockly, or native JSON block
 */
var BlockInstance = /*#__PURE__*/_createClass(function BlockInstance(target, block) {
  _classCallCheck(this, BlockInstance);
  this.targetId = target.id;
  this.id = block.id;
});


/***/ }),

/***/ "./src/addons/addons/find-bar/blockly/Utils.js":
/*!*****************************************************!*\
  !*** ./src/addons/addons/find-bar/blockly/Utils.js ***!
  \*****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return Utils; });
/* harmony import */ var _BlockInstance_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./BlockInstance.js */ "./src/addons/addons/find-bar/blockly/BlockInstance.js");
/* harmony import */ var _BlockFlasher_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./BlockFlasher.js */ "./src/addons/addons/find-bar/blockly/BlockFlasher.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }



// Make these global so that every addon uses the same arrays.
var views = [];
var forward = [];
var Utils = /*#__PURE__*/function () {
  function Utils(addon) {
    var _this = this;
    _classCallCheck(this, Utils);
    this.addon = addon;
    this.addon.tab.traps.getBlockly().then(function (blockly) {
      _this.blockly = blockly;
    });
    /**
     * Scratch Virtual Machine
     * @type {null|*}
     */
    this.vm = this.addon.tab.traps.vm;
    // this._myFlash = { block: null, timerID: null, colour: null };
    this.offsetX = 32;
    this.offsetY = 32;
    this.navigationHistory = new NavigationHistory();
    /**
     * The workspace
     */
    this._workspace = null;
  }

  /**
   * Get the Scratch Editing Target
   * @returns {?Target} the scratch editing target
   */
  return _createClass(Utils, [{
    key: "getEditingTarget",
    value: function getEditingTarget() {
      return this.vm.runtime.getEditingTarget();
    }

    /**
     * Set the current workspace (switches sprites)
     * @param targetID {string}
     */
  }, {
    key: "setEditingTarget",
    value: function setEditingTarget(targetID) {
      if (this.getEditingTarget().id !== targetID) {
        this.vm.setEditingTarget(targetID);
      }
    }

    /**
     * Returns the main workspace
     * @returns !Blockly.Workspace
     */
  }, {
    key: "getWorkspace",
    value: function getWorkspace() {
      var currentWorkspace = Blockly.getMainWorkspace();
      if (currentWorkspace.getToolbox()) {
        // Sadly get get workspace does not always return the 'real' workspace... Not sure how to get that at the moment,
        //  but we can work out whether it's the right one by whether it has a toolbox.
        this._workspace = currentWorkspace;
      }
      return this._workspace;
    }

    /**
     * Based on wksp.centerOnBlock(li.data.labelID);
     * @param blockOrId {Blockly.Block|{id}|BlockInstance} A Blockly Block, a block id, or a BlockInstance
     */
  }, {
    key: "scrollBlockIntoView",
    value: function scrollBlockIntoView(blockOrId) {
      var _this$blockly;
      var workspace = this.getWorkspace();
      /** @type {Blockly.Block} */
      var block; // or is it really a Blockly.BlockSvg?

      if (blockOrId instanceof _BlockInstance_js__WEBPACK_IMPORTED_MODULE_0__["default"]) {
        // Switch to sprite
        this.setEditingTarget(blockOrId.targetId);
        // Highlight the block!
        block = workspace.getBlockById(blockOrId.id);
      } else {
        block = blockOrId && blockOrId.id ? blockOrId : workspace.getBlockById(blockOrId);
      }
      if (!block) {
        return;
      }

      /**
       * !Blockly.Block
       */
      var root = block.getRootBlock();
      var base = this.getTopOfStackFor(block);
      var ePos = base.getRelativeToSurfaceXY(),
        // Align with the top of the block
        rPos = root.getRelativeToSurfaceXY(),
        // Align with the left of the block 'stack'
        scale = workspace.scale,
        x = rPos.x * scale,
        y = ePos.y * scale,
        xx = block.width + x,
        // Turns out they have their x & y stored locally, and they are the actual size rather than scaled or including children...
        yy = block.height + y,
        s = workspace.getMetrics();
      if (x < s.viewLeft + this.offsetX - 4 || xx > s.viewLeft + s.viewWidth || y < s.viewTop + this.offsetY - 4 || yy > s.viewTop + s.viewHeight) {
        // sx = s.contentLeft + s.viewWidth / 2 - x,
        var sx = x - s.contentLeft - this.offsetX,
          // sy = s.contentTop - y + Math.max(Math.min(32, 32 * scale), (s.viewHeight - yh) / 2);
          sy = y - s.contentTop - this.offsetY;
        this.navigationHistory.storeView(this.navigationHistory.peek(), 64);

        // workspace.hideChaff(),
        workspace.scrollbar.set(sx, sy);
        this.navigationHistory.storeView({
          left: sx,
          top: sy
        }, 64);
      }
      (_this$blockly = this.blockly) === null || _this$blockly === void 0 ? void 0 : _this$blockly.hideChaff();
      _BlockFlasher_js__WEBPACK_IMPORTED_MODULE_1__["default"].flash(block);
    }

    /**
     * Find the top stack block of a  stack
     * @param block a block in a stack
     * @returns {*} a block that is the top of the stack of blocks
     */
  }, {
    key: "getTopOfStackFor",
    value: function getTopOfStackFor(block) {
      var base = block;
      while (base.getOutputShape() && base.getSurroundParent()) {
        base = base.getSurroundParent();
      }
      return base;
    }
  }]);
}();

var NavigationHistory = /*#__PURE__*/function () {
  function NavigationHistory() {
    _classCallCheck(this, NavigationHistory);
  }
  return _createClass(NavigationHistory, [{
    key: "storeView",
    value:
    /**
     * Keep a record of the scroll and zoom position
     */
    function storeView(next, dist) {
      forward = [];
      var workspace = Blockly.getMainWorkspace(),
        s = workspace.getMetrics();
      var pos = {
        left: s.viewLeft,
        top: s.viewTop
      };
      if (!next || distance(pos, next) > dist) {
        views.push(pos);
      }
    }
  }, {
    key: "peek",
    value: function peek() {
      return views.length > 0 ? views[views.length - 1] : null;
    }
  }, {
    key: "goBack",
    value: function goBack() {
      var workspace = Blockly.getMainWorkspace(),
        s = workspace.getMetrics();
      var pos = {
        left: s.viewLeft,
        top: s.viewTop
      };
      var view = this.peek();
      if (!view) {
        return;
      }
      if (distance(pos, view) < 64) {
        // Go back to current if we are already far away from it
        if (views.length > 1) {
          views.pop();
          forward.push(view);
        }
      }
      view = this.peek();
      if (!view) {
        return;
      }
      var sx = view.left - s.contentLeft,
        sy = view.top - s.contentTop;

      // transform.setTranslate(-600,0);

      workspace.scrollbar.set(sx, sy);

      /*
                let blocklySvg = document.getElementsByClassName('blocklySvg')[0];
                let blocklyBlockCanvas = blocklySvg.getElementsByClassName('blocklyBlockCanvas')[0];
                let transform = blocklyBlockCanvas.transform.baseVal.getItem(0);
                let scale = blocklyBlockCanvas.transform.baseVal.getItem(1);
                 let transformMatrix = transform.matrix;
                let scaleMatrix = scale.matrix;
                 console.log('Transform - getMetrics', s);
                console.log('sx, sy: ', sx, sy);
                console.log('left, top: ', view.left, view.top);
                console.log('contentLeft, right:', s.contentLeft, s.contentTop);
                console.log('transform, scale matrix: ', transformMatrix, scaleMatrix);
      */
    }
  }, {
    key: "goForward",
    value: function goForward() {
      var view = forward.pop();
      if (!view) {
        return;
      }
      views.push(view);
      var workspace = Blockly.getMainWorkspace(),
        s = workspace.getMetrics();
      var sx = view.left - s.contentLeft,
        sy = view.top - s.contentTop;
      workspace.scrollbar.set(sx, sy);
    }
  }]);
}();
function distance(pos, next) {
  return Math.sqrt(Math.pow(pos.left - next.left, 2) + Math.pow(pos.top - next.top, 2));
}

/***/ }),

/***/ "./src/addons/addons/jump-to-def/_runtime_entry.js":
/*!*********************************************************!*\
  !*** ./src/addons/addons/jump-to-def/_runtime_entry.js ***!
  \*********************************************************/
/*! exports provided: resources */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "resources", function() { return resources; });
/* harmony import */ var _userscript_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./userscript.js */ "./src/addons/addons/jump-to-def/userscript.js");
/* generated by pull.js */

var resources = {
  "userscript.js": _userscript_js__WEBPACK_IMPORTED_MODULE_0__["default"]
};

/***/ }),

/***/ "./src/addons/addons/jump-to-def/userscript.js":
/*!*****************************************************!*\
  !*** ./src/addons/addons/jump-to-def/userscript.js ***!
  \*****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _find_bar_blockly_Utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../find-bar/blockly/Utils.js */ "./src/addons/addons/find-bar/blockly/Utils.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }
function _createForOfIteratorHelper(r, e) { var t = "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (!t) { if (Array.isArray(r) || (t = _unsupportedIterableToArray(r)) || e && r && "number" == typeof r.length) { t && (r = t); var _n = 0, F = function F() {}; return { s: F, n: function n() { return _n >= r.length ? { done: !0 } : { done: !1, value: r[_n++] }; }, e: function e(r) { throw r; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var o, a = !0, u = !1; return { s: function s() { t = t.call(r); }, n: function n() { var r = t.next(); return a = r.done, r; }, e: function e(r) { u = !0, o = r; }, f: function f() { try { a || null == t["return"] || t["return"](); } finally { if (u) throw o; } } }; }
function _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }
function _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }

/* harmony default export */ __webpack_exports__["default"] = (function (_x) {
  return _ref2.apply(this, arguments);
});
function _ref2() {
  _ref2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(_ref) {
    var addon, msg, console, utils, Blockly, _doBlockClick_;
    return _regeneratorRuntime().wrap(function _callee$(_context) {
      while (1) switch (_context.prev = _context.next) {
        case 0:
          addon = _ref.addon, msg = _ref.msg, console = _ref.console;
          utils = new _find_bar_blockly_Utils_js__WEBPACK_IMPORTED_MODULE_0__["default"](addon);
          _context.next = 4;
          return addon.tab.traps.getBlockly();
        case 4:
          Blockly = _context.sent;
          Object.defineProperty(Blockly.Gesture.prototype, "jumpToDef", {
            get: function get() {
              return !addon.self.disabled;
            }
          });
          _doBlockClick_ = Blockly.Gesture.prototype.doBlockClick_;
          Blockly.Gesture.prototype.doBlockClick_ = function () {
            if (!addon.self.disabled && (this.mostRecentEvent_.button === 1 || this.mostRecentEvent_.shiftKey)) {
              // Wheel button...
              // Intercept clicks to allow jump to...?
              var block = this.startBlock_;
              for (; block; block = block.getSurroundParent()) {
                if (block.type === "procedures_call") {
                  var findProcCode = block.getProcCode();
                  var topBlocks = utils.getWorkspace().getTopBlocks();
                  var _iterator = _createForOfIteratorHelper(topBlocks),
                    _step;
                  try {
                    for (_iterator.s(); !(_step = _iterator.n()).done;) {
                      var root = _step.value;
                      if (root.type === "procedures_definition") {
                        var label = root.getChildren()[0];
                        var procCode = label.getProcCode();
                        if (procCode && procCode === findProcCode) {
                          // Found... navigate to it!
                          utils.scrollBlockIntoView(root);
                          return;
                        }
                      }
                    }
                  } catch (err) {
                    _iterator.e(err);
                  } finally {
                    _iterator.f();
                  }
                }
              }
            }
            _doBlockClick_.call(this);
          };
        case 8:
        case "end":
          return _context.stop();
      }
    }, _callee);
  }));
  return _ref2.apply(this, arguments);
}

/***/ }),

/***/ "./src/addons/addons/mute-project/_runtime_entry.js":
/*!**********************************************************!*\
  !*** ./src/addons/addons/mute-project/_runtime_entry.js ***!
  \**********************************************************/
/*! exports provided: resources */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "resources", function() { return resources; });
/* harmony import */ var _userscript_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./userscript.js */ "./src/addons/addons/mute-project/userscript.js");
/* harmony import */ var _url_loader_mute_svg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! url-loader!./mute.svg */ "./node_modules/url-loader/dist/cjs.js!./src/addons/addons/mute-project/mute.svg");
/* generated by pull.js */


var resources = {
  "userscript.js": _userscript_js__WEBPACK_IMPORTED_MODULE_0__["default"],
  "mute.svg": _url_loader_mute_svg__WEBPACK_IMPORTED_MODULE_1__["default"]
};

/***/ }),

/***/ "./src/addons/addons/mute-project/userscript.js":
/*!******************************************************!*\
  !*** ./src/addons/addons/mute-project/userscript.js ***!
  \******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _vol_slider_module_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../vol-slider/module.js */ "./src/addons/addons/vol-slider/module.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }

/* harmony default export */ __webpack_exports__["default"] = (function (_x) {
  return _ref2.apply(this, arguments);
});
function _ref2() {
  _ref2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(_ref) {
    var addon, console, vm, icon, updateIcon, clickMuteButton, button;
    return _regeneratorRuntime().wrap(function _callee$(_context) {
      while (1) switch (_context.prev = _context.next) {
        case 0:
          addon = _ref.addon, console = _ref.console;
          vm = addon.tab.traps.vm;
          Object(_vol_slider_module_js__WEBPACK_IMPORTED_MODULE_0__["setup"])(vm);
          icon = document.createElement("img");
          icon.loading = "lazy";
          icon.src = addon.self.getResource("/mute.svg") /* rewritten by pull.js */;
          icon.className = "sa-mute-project-icon";
          icon.style.userSelect = "none";
          addon.tab.displayNoneWhileDisabled(icon);
          updateIcon = function updateIcon() {
            icon.style.display = addon.self.disabled || !Object(_vol_slider_module_js__WEBPACK_IMPORTED_MODULE_0__["isMuted"])() ? "none" : "";
          };
          Object(_vol_slider_module_js__WEBPACK_IMPORTED_MODULE_0__["onVolumeChanged"])(updateIcon);
          updateIcon();
          clickMuteButton = function clickMuteButton(e) {
            if (!addon.self.disabled && (e.ctrlKey || e.metaKey)) {
              e.cancelBubble = true;
              e.preventDefault();
              Object(_vol_slider_module_js__WEBPACK_IMPORTED_MODULE_0__["setMuted"])(!Object(_vol_slider_module_js__WEBPACK_IMPORTED_MODULE_0__["isMuted"])());
            }
          };
          addon.self.addEventListener("disabled", function () {
            if (Object(_vol_slider_module_js__WEBPACK_IMPORTED_MODULE_0__["isMuted"])()) {
              Object(_vol_slider_module_js__WEBPACK_IMPORTED_MODULE_0__["setMuted"])(false);
            }
          });
        case 14:
          if (false) {}
          _context.next = 17;
          return addon.tab.waitForElement("[class^='green-flag_green-flag']", {
            markAsSeen: true,
            reduxEvents: ["scratch-gui/mode/SET_PLAYER", "fontsLoaded/SET_FONTS_LOADED", "scratch-gui/locales/SELECT_LOCALE"]
          });
        case 17:
          button = _context.sent;
          addon.tab.appendToSharedSpace({
            space: "afterStopButton",
            element: icon,
            order: 0
          });
          button.addEventListener("click", clickMuteButton);
          button.addEventListener("contextmenu", clickMuteButton);
          _context.next = 14;
          break;
        case 23:
        case "end":
          return _context.stop();
      }
    }, _callee);
  }));
  return _ref2.apply(this, arguments);
}

/***/ }),

/***/ "./src/addons/addons/pause/_runtime_entry.js":
/*!***************************************************!*\
  !*** ./src/addons/addons/pause/_runtime_entry.js ***!
  \***************************************************/
/*! exports provided: resources */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "resources", function() { return resources; });
/* harmony import */ var _userscript_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./userscript.js */ "./src/addons/addons/pause/userscript.js");
/* harmony import */ var _css_loader_style_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! css-loader!./style.css */ "./node_modules/css-loader/index.js!./src/addons/addons/pause/style.css");
/* harmony import */ var _css_loader_style_css__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_css_loader_style_css__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _url_loader_pause_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! url-loader!./pause.svg */ "./node_modules/url-loader/dist/cjs.js!./src/addons/addons/pause/pause.svg");
/* harmony import */ var _url_loader_play_svg__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! url-loader!./play.svg */ "./node_modules/url-loader/dist/cjs.js!./src/addons/addons/pause/play.svg");
/* generated by pull.js */




var resources = {
  "userscript.js": _userscript_js__WEBPACK_IMPORTED_MODULE_0__["default"],
  "style.css": _css_loader_style_css__WEBPACK_IMPORTED_MODULE_1___default.a,
  "pause.svg": _url_loader_pause_svg__WEBPACK_IMPORTED_MODULE_2__["default"],
  "play.svg": _url_loader_play_svg__WEBPACK_IMPORTED_MODULE_3__["default"]
};

/***/ }),

/***/ "./src/addons/addons/pause/userscript.js":
/*!***********************************************!*\
  !*** ./src/addons/addons/pause/userscript.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _debugger_module_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../debugger/module.js */ "./src/addons/addons/debugger/module.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }

/* harmony default export */ __webpack_exports__["default"] = (function (_x) {
  return _ref2.apply(this, arguments);
});
function _ref2() {
  _ref2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(_ref) {
    var addon, console, msg, img, setSrc;
    return _regeneratorRuntime().wrap(function _callee$(_context) {
      while (1) switch (_context.prev = _context.next) {
        case 0:
          addon = _ref.addon, console = _ref.console, msg = _ref.msg;
          Object(_debugger_module_js__WEBPACK_IMPORTED_MODULE_0__["setup"])(addon);
          img = document.createElement("img");
          img.className = "pause-btn";
          img.draggable = false;
          img.title = msg("pause");
          setSrc = function setSrc() {
            img.src = addon.self.getResource(Object(_debugger_module_js__WEBPACK_IMPORTED_MODULE_0__["isPaused"])() ? "/play.svg" : "/pause.svg") /* rewritten by pull.js */;
            img.title = Object(_debugger_module_js__WEBPACK_IMPORTED_MODULE_0__["isPaused"])() ? msg("play") : msg("pause");
          };
          img.addEventListener("click", function () {
            return Object(_debugger_module_js__WEBPACK_IMPORTED_MODULE_0__["setPaused"])(!Object(_debugger_module_js__WEBPACK_IMPORTED_MODULE_0__["isPaused"])());
          });
          addon.tab.displayNoneWhileDisabled(img);
          addon.self.addEventListener("disabled", function () {
            return Object(_debugger_module_js__WEBPACK_IMPORTED_MODULE_0__["setPaused"])(false);
          });
          setSrc();
          Object(_debugger_module_js__WEBPACK_IMPORTED_MODULE_0__["onPauseChanged"])(setSrc);
          document.addEventListener("keydown", function (e) {
            // e.code is not enough because that corresponds to physical keys, ignoring keyboard layouts.
            // e.key is not enough because on macOS, option+x types ≈ and shift+option+x types ˛
            // e.keyCode is always 88 when pressing x regardless of modifier keys, so that's how we'll handle macOS.
            // Because keyCode is deprecated we'll still check e.key in case keyCode is not as reliable as we think it is
            if (e.altKey && (e.key.toLowerCase() === "x" || e.keyCode === 88) && !addon.self.disabled) {
              e.preventDefault();
              e.stopImmediatePropagation();
              Object(_debugger_module_js__WEBPACK_IMPORTED_MODULE_0__["setPaused"])(!Object(_debugger_module_js__WEBPACK_IMPORTED_MODULE_0__["isPaused"])());
            }
          }, {
            capture: true
          });
        case 13:
          if (false) {}
          _context.next = 16;
          return addon.tab.waitForElement("[class^='green-flag']", {
            markAsSeen: true,
            reduxEvents: ["scratch-gui/mode/SET_PLAYER", "fontsLoaded/SET_FONTS_LOADED", "scratch-gui/locales/SELECT_LOCALE"]
          });
        case 16:
          addon.tab.appendToSharedSpace({
            space: "afterGreenFlag",
            element: img,
            order: 0
          });
          _context.next = 13;
          break;
        case 19:
        case "end":
          return _context.stop();
      }
    }, _callee);
  }));
  return _ref2.apply(this, arguments);
}

/***/ }),

/***/ "./src/addons/addons/vol-slider/module.js":
/*!************************************************!*\
  !*** ./src/addons/addons/vol-slider/module.js ***!
  \************************************************/
/*! exports provided: setVolume, getVolume, isMuted, setUnmutedVolume, setMuted, onVolumeChanged, setup */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setVolume", function() { return setVolume; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getVolume", function() { return getVolume; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isMuted", function() { return isMuted; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setUnmutedVolume", function() { return setUnmutedVolume; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setMuted", function() { return setMuted; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "onVolumeChanged", function() { return onVolumeChanged; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setup", function() { return setup; });
// Volumes in this file are always in 0-1.

var hasSetup = false;
/** @type {AudioParam|null} */
var gainNode = null;
var unmuteVolume = 1;
var volumeBeforeFinishSetup = 1;
var callbacks = [];
var setVolume = function setVolume(newVolume) {
  if (gainNode) {
    gainNode.value = newVolume;
  } else {
    volumeBeforeFinishSetup = newVolume;
  }
  callbacks.forEach(function (i) {
    return i();
  });
};
var getVolume = function getVolume() {
  if (gainNode) {
    return gainNode.value;
  }
  return volumeBeforeFinishSetup;
};
var isMuted = function isMuted() {
  return getVolume() === 0;
};
var setUnmutedVolume = function setUnmutedVolume(newUnmuteVolume) {
  unmuteVolume = newUnmuteVolume;
};
var setMuted = function setMuted(newMuted) {
  if (newMuted) {
    setUnmutedVolume(getVolume());
    setVolume(0);
  } else {
    setVolume(unmuteVolume);
  }
};
var onVolumeChanged = function onVolumeChanged(callback) {
  callbacks.push(callback);
};
var gotAudioEngine = function gotAudioEngine(audioEngine) {
  if (!audioEngine) {
    console.error('could not get audio engine; sound-related addons will not work');
    return;
  }
  gainNode = audioEngine.inputNode.gain;
  gainNode.value = volumeBeforeFinishSetup;
};
var setup = function setup(vm) {
  if (hasSetup) {
    return;
  }
  hasSetup = true;
  var audioEngine = vm.runtime.audioEngine;
  if (audioEngine) {
    gotAudioEngine(audioEngine);
  } else {
    vm.runtime.once("PROJECT_LOADED", function () {
      gotAudioEngine(vm.runtime.audioEngine);
    });
  }
};

/***/ }),

/***/ "./src/addons/api.js":
/*!***************************!*\
  !*** ./src/addons/api.js ***!
  \***************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* WEBPACK VAR INJECTION */(function(global) {/* harmony import */ var intl_messageformat__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! intl-messageformat */ "./node_modules/intl-messageformat/index.js");
/* harmony import */ var intl_messageformat__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(intl_messageformat__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _settings_store_singleton__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./settings-store-singleton */ "./src/addons/settings-store-singleton.js");
/* harmony import */ var _lib_data_uri_to_blob__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../lib/data-uri-to-blob */ "./src/lib/data-uri-to-blob.js");
/* harmony import */ var _event_target__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./event-target */ "./src/addons/event-target.js");
/* harmony import */ var _hooks__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./hooks */ "./src/addons/hooks.js");
/* harmony import */ var _generated_addon_manifests__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./generated/addon-manifests */ "./src/addons/generated/addon-manifests.js");
/* harmony import */ var _addons_l10n_en_json__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./addons-l10n/en.json */ "./src/addons/addons-l10n/en.json");
var _addons_l10n_en_json__WEBPACK_IMPORTED_MODULE_6___namespace = /*#__PURE__*/__webpack_require__.t(/*! ./addons-l10n/en.json */ "./src/addons/addons-l10n/en.json", 1);
/* harmony import */ var _generated_l10n_entries__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./generated/l10n-entries */ "./src/addons/generated/l10n-entries.js");
/* harmony import */ var _generated_addon_entries__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./generated/addon-entries */ "./src/addons/generated/addon-entries.js");
/* harmony import */ var _contextmenu__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./contextmenu */ "./src/addons/contextmenu.js");
/* harmony import */ var _modal__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./modal */ "./src/addons/modal.js");
/* harmony import */ var _libraries_common_cs_text_color_esm_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./libraries/common/cs/text-color.esm.js */ "./src/addons/libraries/common/cs/text-color.esm.js");
/* harmony import */ var _conditional_style__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./conditional-style */ "./src/addons/conditional-style.js");
/* harmony import */ var _addon_precedence__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./addon-precedence */ "./src/addons/addon-precedence.js");
/* harmony import */ var _redux__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./redux */ "./src/addons/redux.js");
function _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }
function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t["return"] && (u = t["return"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }
function _arrayWithHoles(r) { if (Array.isArray(r)) return r; }
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
function _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function _createForOfIteratorHelper(r, e) { var t = "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (!t) { if (Array.isArray(r) || (t = _unsupportedIterableToArray(r)) || e && r && "number" == typeof r.length) { t && (r = t); var _n = 0, F = function F() {}; return { s: F, n: function n() { return _n >= r.length ? { done: !0 } : { done: !1, value: r[_n++] }; }, e: function e(r) { throw r; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var o, a = !0, u = !1; return { s: function s() { t = t.call(r); }, n: function n() { var r = t.next(); return a = r.done, r; }, e: function e(r) { u = !0, o = r; }, f: function f() { try { a || null == t["return"] || t["return"](); } finally { if (u) throw o; } } }; }
function _toConsumableArray(r) { return _arrayWithoutHoles(r) || _iterableToArray(r) || _unsupportedIterableToArray(r) || _nonIterableSpread(); }
function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }
function _iterableToArray(r) { if ("undefined" != typeof Symbol && null != r[Symbol.iterator] || null != r["@@iterator"]) return Array.from(r); }
function _arrayWithoutHoles(r) { if (Array.isArray(r)) return _arrayLikeToArray(r); }
function _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
/**
 * Copyright (C) 2021 Thomas Weber
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see <https://www.gnu.org/licenses/>.
 */

















/* eslint-disable no-console */

var escapeHTML = function escapeHTML(str) {
  return str.replace(/([<>'"&])/g, function (_, l) {
    return "&#".concat(l.charCodeAt(0), ";");
  });
};
var kebabCaseToCamelCase = function kebabCaseToCamelCase(str) {
  return str.replace(/-([a-z])/g, function (g) {
    return g[1].toUpperCase();
  });
};
var _scratchClassNames = null;
var getScratchClassNames = function getScratchClassNames() {
  if (_scratchClassNames) {
    return _scratchClassNames;
  }
  var cssRules = Array.from(document.styleSheets)
  // Ignore some scratch-paint stylesheets
  .filter(function (styleSheet) {
    return !(styleSheet.ownerNode.textContent.startsWith('/* DO NOT EDIT\n@todo This file is copied from GUI and should be pulled out into a shared library.') && (styleSheet.ownerNode.textContent.includes('input_input-form') || styleSheet.ownerNode.textContent.includes('label_input-group_')));
  }).map(function (e) {
    try {
      return _toConsumableArray(e.cssRules);
    } catch (_e) {
      return [];
    }
  }).flat();
  var classes = cssRules.map(function (e) {
    return e.selectorText;
  }).filter(function (e) {
    return e;
  }).map(function (e) {
    return e.match(/(([\w-]+?)_([\w-]+)_([\w\d-]+))/g);
  }).filter(function (e) {
    return e;
  }).flat();
  _scratchClassNames = _toConsumableArray(new Set(classes));
  var observer = new MutationObserver(function (mutationList) {
    var _iterator = _createForOfIteratorHelper(mutationList),
      _step;
    try {
      for (_iterator.s(); !(_step = _iterator.n()).done;) {
        var mutation = _step.value;
        var _iterator2 = _createForOfIteratorHelper(mutation.addedNodes),
          _step2;
        try {
          for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
            var node = _step2.value;
            if (node.tagName === 'STYLE') {
              _scratchClassNames = null;
              observer.disconnect();
              return;
            }
          }
        } catch (err) {
          _iterator2.e(err);
        } finally {
          _iterator2.f();
        }
      }
    } catch (err) {
      _iterator.e(err);
    } finally {
      _iterator.f();
    }
  });
  observer.observe(document.head, {
    childList: true
  });
  return _scratchClassNames;
};
var _mutationObserver;
var _mutationObserverCallbacks = [];
var addMutationObserverCallback = function addMutationObserverCallback(newCallback) {
  if (!_mutationObserver) {
    _mutationObserver = new MutationObserver(function () {
      var _iterator3 = _createForOfIteratorHelper(_mutationObserverCallbacks),
        _step3;
      try {
        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
          var cb = _step3.value;
          cb();
        }
      } catch (err) {
        _iterator3.e(err);
      } finally {
        _iterator3.f();
      }
    });
    _mutationObserver.observe(document.documentElement, {
      attributes: false,
      childList: true,
      subtree: true
    });
  }
  _mutationObserverCallbacks.push(newCallback);
};
var removeMutationObserverCallback = function removeMutationObserverCallback(callback) {
  _mutationObserverCallbacks = _mutationObserverCallbacks.filter(function (i) {
    return i !== callback;
  });
};
var getEditorMode = function getEditorMode() {
  // eslint-disable-next-line no-use-before-define
  var mode = _redux__WEBPACK_IMPORTED_MODULE_14__["default"].state.scratchGui.mode;
  if (mode.isEmbedded) return 'embed';
  if (mode.isFullScreen) return 'fullscreen';
  if (mode.isPlayerOnly) return 'projectpage';
  return 'editor';
};

/**
 * @returns {string} Locale code
 */
var getLocale = function getLocale() {
  var locale = _redux__WEBPACK_IMPORTED_MODULE_14__["default"].state.locales.locale;
  if (Object.prototype.hasOwnProperty.call(_generated_l10n_entries__WEBPACK_IMPORTED_MODULE_7__["default"], locale)) {
    return locale;
  }
  return locale.split('-')[0];
};
var language = getLocale();
var getTranslations = /*#__PURE__*/function () {
  var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
    var localeMessages;
    return _regeneratorRuntime().wrap(function _callee$(_context) {
      while (1) switch (_context.prev = _context.next) {
        case 0:
          if (!Object.prototype.hasOwnProperty.call(_generated_l10n_entries__WEBPACK_IMPORTED_MODULE_7__["default"], language)) {
            _context.next = 5;
            break;
          }
          _context.next = 3;
          return _generated_l10n_entries__WEBPACK_IMPORTED_MODULE_7__["default"][language]();
        case 3:
          localeMessages = _context.sent;
          Object.assign(_addons_l10n_en_json__WEBPACK_IMPORTED_MODULE_6__, localeMessages);
        case 5:
        case "end":
          return _context.stop();
      }
    }, _callee);
  }));
  return function getTranslations() {
    return _ref.apply(this, arguments);
  };
}();
var addonMessagesPromise = getTranslations();
var untilInEditor = function untilInEditor() {
  if (!_redux__WEBPACK_IMPORTED_MODULE_14__["default"].state.scratchGui.mode.isPlayerOnly || _redux__WEBPACK_IMPORTED_MODULE_14__["default"].state.scratchGui.mode.isEmbedded) {
    return;
  }
  return new Promise(function (resolve) {
    var _handler = function handler() {
      if (!_redux__WEBPACK_IMPORTED_MODULE_14__["default"].state.scratchGui.mode.isPlayerOnly) {
        resolve();
        _redux__WEBPACK_IMPORTED_MODULE_14__["default"].removeEventListener('statechanged', _handler);
      }
    };
    _redux__WEBPACK_IMPORTED_MODULE_14__["default"].initialize();
    _redux__WEBPACK_IMPORTED_MODULE_14__["default"].addEventListener('statechanged', _handler);
  });
};
var getDisplayNoneWhileDisabledClass = function getDisplayNoneWhileDisabledClass(id) {
  return "addons-display-none-".concat(id);
};
var parseArguments = function parseArguments(code) {
  return code.split(/(?=[^\\]%[nbs])/g).map(function (i) {
    return i.trim();
  }).filter(function (i) {
    return i.charAt(0) === '%';
  }).map(function (i) {
    return i.substring(0, 2);
  });
};
var fixDisplayName = function fixDisplayName(displayName) {
  return displayName.replace(/([^\s])(%[nbs])/g, function (_, before, arg) {
    return "".concat(before, " ").concat(arg);
  });
};
var compareArrays = function compareArrays(a, b) {
  return JSON.stringify(a) === JSON.stringify(b);
};
var _firstAddBlockRan = false;
var contextMenuCallbacks = [];
var CONTEXT_MENU_ORDER = ['editor-devtools', 'block-switching', 'blocks2image', 'swap-local-global'];
var createdAnyBlockContextMenus = false;
var updateClasses = function updateClasses() {
  var state = _redux__WEBPACK_IMPORTED_MODULE_14__["default"].state;
  var isSmallStage = state.scratchGui.stageSize.stageSize === 'small';
  var isFullScreen = state.scratchGui.mode.isFullScreen;
  var isPlayerOnly = state.scratchGui.mode.isPlayerOnly;
  document.body.classList.toggle('sa-small-stage', isSmallStage && !isFullScreen && !isPlayerOnly);
  document.body.classList.toggle('sa-body-editor', !isPlayerOnly || isFullScreen);
};
_redux__WEBPACK_IMPORTED_MODULE_14__["default"].addEventListener('statechanged', function (e) {
  if (e.detail.action.type === 'scratch-gui/StageSize/SET_STAGE_SIZE' || e.detail.action.type === 'scratch-gui/mode/SET_FULL_SCREEN' || e.detail.action.type === 'scratch-gui/mode/SET_PLAYER') {
    updateClasses();
  }
});
updateClasses();
var getInternalKey = function getInternalKey(element) {
  return Object.keys(element).find(function (key) {
    return key.startsWith('__reactInternalInstance$');
  });
};
var Tab = /*#__PURE__*/function (_EventTargetShim) {
  function Tab(id) {
    var _this;
    _classCallCheck(this, Tab);
    _this = _callSuper(this, Tab);
    _this._id = id;
    _this._seenElements = new WeakSet();
    // traps is public API
    _this.traps = {
      get vm() {
        return _redux__WEBPACK_IMPORTED_MODULE_14__["default"].state.scratchGui.vm;
      },
      getBlockly: function getBlockly() {
        if (_hooks__WEBPACK_IMPORTED_MODULE_4__["default"].blockly) {
          return Promise.resolve(_hooks__WEBPACK_IMPORTED_MODULE_4__["default"].blockly);
        }
        return new Promise(function (resolve) {
          _hooks__WEBPACK_IMPORTED_MODULE_4__["default"].blocklyCallbacks.push(function () {
            return resolve(_hooks__WEBPACK_IMPORTED_MODULE_4__["default"].blockly);
          });
        });
      },
      getWorkspace: function getWorkspace() {
        return _hooks__WEBPACK_IMPORTED_MODULE_4__["default"].blocklyWorkspace;
      },
      getPaper: function () {
        var _getPaper = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {
          var modeSelector, reactInternalKey, internalState, toolState, tool, toolInstance, paperScope;
          return _regeneratorRuntime().wrap(function _callee2$(_context2) {
            while (1) switch (_context2.prev = _context2.next) {
              case 0:
                _context2.next = 2;
                return _this.waitForElement("[class*='paint-editor_mode-selector']", {
                  reduxCondition: function reduxCondition(state) {
                    return state.scratchGui.editorTab.activeTabIndex === 1 && !state.scratchGui.mode.isPlayerOnly;
                  }
                });
              case 2:
                modeSelector = _context2.sent;
                reactInternalKey = Object.keys(modeSelector).find(function (key) {
                  return key.startsWith('__reactInternalInstance$');
                });
                internalState = modeSelector[reactInternalKey].child; // .tool or .blob.tool only exists on the selected tool
                toolState = internalState;
              case 6:
                if (!toolState) {
                  _context2.next = 17;
                  break;
                }
                toolInstance = toolState.child.stateNode;
                if (!toolInstance.tool) {
                  _context2.next = 11;
                  break;
                }
                tool = toolInstance.tool;
                return _context2.abrupt("break", 17);
              case 11:
                if (!(toolInstance.blob && toolInstance.blob.tool)) {
                  _context2.next = 14;
                  break;
                }
                tool = toolInstance.blob.tool;
                return _context2.abrupt("break", 17);
              case 14:
                toolState = toolState.sibling;
                _context2.next = 6;
                break;
              case 17:
                if (!tool) {
                  _context2.next = 20;
                  break;
                }
                paperScope = tool._scope;
                return _context2.abrupt("return", paperScope);
              case 20:
                throw new Error('cannot find paper :(');
              case 21:
              case "end":
                return _context2.stop();
            }
          }, _callee2);
        }));
        function getPaper() {
          return _getPaper.apply(this, arguments);
        }
        return getPaper;
      }(),
      getInternalKey: getInternalKey
    };
    return _this;
  }
  _inherits(Tab, _EventTargetShim);
  return _createClass(Tab, [{
    key: "redux",
    get: function get() {
      return _redux__WEBPACK_IMPORTED_MODULE_14__["default"];
    }
  }, {
    key: "waitForElement",
    value: function waitForElement(selector) {
      var _this2 = this;
      var _ref2 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
        _ref2$markAsSeen = _ref2.markAsSeen,
        markAsSeen = _ref2$markAsSeen === void 0 ? false : _ref2$markAsSeen,
        condition = _ref2.condition,
        reduxCondition = _ref2.reduxCondition,
        reduxEvents = _ref2.reduxEvents;
      var externalEventSatisfied = true;
      var evaluateCondition = function evaluateCondition() {
        if (!externalEventSatisfied) return false;
        if (condition && !condition()) return false;
        if (reduxCondition && !reduxCondition(_redux__WEBPACK_IMPORTED_MODULE_14__["default"].state)) return false;
        return true;
      };
      if (evaluateCondition()) {
        var firstQuery = document.querySelectorAll(selector);
        var _iterator4 = _createForOfIteratorHelper(firstQuery),
          _step4;
        try {
          for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {
            var element = _step4.value;
            if (this._seenElements.has(element)) continue;
            if (markAsSeen) this._seenElements.add(element);
            return Promise.resolve(element);
          }
        } catch (err) {
          _iterator4.e(err);
        } finally {
          _iterator4.f();
        }
      }
      var reduxListener;
      if (reduxEvents) {
        externalEventSatisfied = false;
        reduxListener = function reduxListener(_ref3) {
          var detail = _ref3.detail;
          var type = detail.action.type;
          // As addons can't run before DOM exists here, ignore fontsLoaded/SET_FONTS_LOADED
          // Otherwise, as our font loading is very async, we could activate more often than required.
          if (reduxEvents.includes(type) && type !== 'fontsLoaded/SET_FONTS_LOADED') {
            externalEventSatisfied = true;
          }
        };
        this.redux.initialize();
        this.redux.addEventListener('statechanged', reduxListener);
      }
      return new Promise(function (resolve) {
        var _callback = function callback() {
          if (!evaluateCondition()) {
            return;
          }
          var elements = document.querySelectorAll(selector);
          var _iterator5 = _createForOfIteratorHelper(elements),
            _step5;
          try {
            for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {
              var _element = _step5.value;
              if (_this2._seenElements.has(_element)) continue;
              resolve(_element);
              removeMutationObserverCallback(_callback);
              if (markAsSeen) _this2._seenElements.add(_element);
              if (reduxListener) {
                _this2.redux.removeEventListener('statechanged', reduxListener);
              }
              break;
            }
          } catch (err) {
            _iterator5.e(err);
          } finally {
            _iterator5.f();
          }
        };
        addMutationObserverCallback(_callback);
      });
    }
  }, {
    key: "appendToSharedSpace",
    value: function appendToSharedSpace(_ref4) {
      var _this3 = this;
      var space = _ref4.space,
        element = _ref4.element,
        order = _ref4.order,
        scope = _ref4.scope;
      var q = document.querySelector.bind(document);
      var SHARED_SPACES = {
        stageHeader: {
          // Non-fullscreen stage header only
          element: function element() {
            return q("[class^='stage-header_stage-size-row']");
          },
          from: function from() {
            return [];
          },
          until: function until() {
            return [
            // Small/big stage buttons (for editor mode)
            q("[class^='stage-header_stage-size-toggle-group']"),
            // Full screen icon (for player mode)
            q("[class^='stage-header_stage-size-row']").lastChild];
          }
        },
        fullscreenStageHeader: {
          // Upstream uses sa-spacer for this one, but we don't need to
          // Fullscreen stage header only
          element: function element() {
            return q("[class^='stage-header_fullscreen-buttons-row_']");
          },
          from: function from() {
            return [];
          },
          until: function until() {
            return [q("[class^='stage-header_fullscreen-buttons-row_']").lastChild];
          }
        },
        afterGreenFlag: {
          element: function element() {
            return q("[class^='controls_controls-container']");
          },
          from: function from() {
            return [];
          },
          until: function until() {
            return [q("[class^='stop-all_stop-all']")];
          }
        },
        afterStopButton: {
          element: function element() {
            return q("[class^='controls_controls-container']");
          },
          from: function from() {
            return [q("[class^='stop-all_stop-all']")];
          },
          until: function until() {
            return [];
          }
        },
        afterSoundTab: {
          element: function element() {
            return q("[class^='react-tabs_react-tabs__tab-list']");
          },
          from: function from() {
            return [q("[class^='react-tabs_react-tabs__tab-list']").children[2]];
          },
          // Element used in find-bar addon
          until: function until() {
            return [q('.sa-find-bar')];
          }
        },
        assetContextMenuAfterExport: {
          element: function element() {
            return scope;
          },
          from: function from() {
            return Array.prototype.filter.call(scope.children, function (c) {
              return c.textContent === _this3.scratchMessage('gui.spriteSelectorItem.contextMenuExport');
            });
          },
          until: function until() {
            return Array.prototype.filter.call(scope.children, function (c) {
              return c.textContent === _this3.scratchMessage('gui.spriteSelectorItem.contextMenuDelete');
            });
          }
        },
        assetContextMenuAfterDelete: {
          element: function element() {
            return scope;
          },
          from: function from() {
            return Array.prototype.filter.call(scope.children, function (c) {
              return c.textContent === _this3.scratchMessage('gui.spriteSelectorItem.contextMenuDelete');
            });
          },
          until: function until() {
            return [];
          }
        },
        monitor: {
          element: function element() {
            return scope;
          },
          from: function from() {
            var endOfVanilla = [_this3.scratchMessage('gui.monitor.contextMenu.large'), _this3.scratchMessage('gui.monitor.contextMenu.slider'), _this3.scratchMessage('gui.monitor.contextMenu.sliderRange'), _this3.scratchMessage('gui.monitor.contextMenu.export')];
            var potential = Array.prototype.filter.call(scope.children, function (c) {
              return endOfVanilla.includes(c.textContent);
            });
            return [potential[potential.length - 1]];
          },
          until: function until() {
            return [];
          }
        },
        paintEditorZoomControls: {
          element: function element() {
            return q('.sa-paintEditorZoomControls-wrapper') || function () {
              var wrapper = Object.assign(document.createElement('div'), {
                className: 'sa-paintEditorZoomControls-wrapper'
              });
              wrapper.style.display = 'flex';
              wrapper.style.flexDirection = 'row-reverse';
              wrapper.style.height = 'calc(1.95rem + 2px)';
              var zoomControls = q("[class^='paint-editor_zoom-controls']");
              zoomControls.replaceWith(wrapper);
              wrapper.appendChild(zoomControls);
              return wrapper;
            }();
          },
          from: function from() {
            return [];
          },
          until: function until() {
            return [];
          }
        }
      };
      var spaceInfo = SHARED_SPACES[space];
      var spaceElement = spaceInfo.element();
      if (!spaceElement) return false;
      var from = spaceInfo.from();
      var until = spaceInfo.until();
      element.dataset.saSharedSpaceOrder = order;
      var foundFrom = false;
      if (from.length === 0) foundFrom = true;

      // insertAfter = element whose nextSibling will be the new element
      // -1 means append at beginning of space (prepend)
      // This will stay null if we need to append at the end of space
      var insertAfter = null;
      var children = Array.from(spaceElement.children);
      var _iterator6 = _createForOfIteratorHelper(children.keys()),
        _step6;
      try {
        for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {
          var indexString = _step6.value;
          var child = children[indexString];
          var i = Number(indexString);

          // Find either element from "from" before doing anything
          if (!foundFrom) {
            if (from.includes(child)) {
              foundFrom = true;
              // If this is the last child, insertAfter will stay null
              // and the element will be appended at the end of space
            }
            continue;
          }
          if (until.includes(child)) {
            // This is the first SA element appended to this space
            // If from = [] then prepend, otherwise append after
            // previous child (likely a "from" element)
            if (i === 0) insertAfter = -1;else insertAfter = children[i - 1];
            break;
          }
          if (child.dataset.saSharedSpaceOrder) {
            if (Number(child.dataset.saSharedSpaceOrder) > order) {
              // We found another SA element with higher order number
              // If from = [] and this is the first child, prepend.
              // Otherwise, append before this child.
              if (i === 0) insertAfter = -1;else insertAfter = children[i - 1];
              break;
            }
          }
        }
      } catch (err) {
        _iterator6.e(err);
      } finally {
        _iterator6.f();
      }
      if (!foundFrom) return false;
      // It doesn't matter if we didn't find an "until"

      if (insertAfter === null) {
        // This might happen with until = []
        spaceElement.appendChild(element);
      } else if (insertAfter === -1) {
        // This might happen with from = []
        spaceElement.prepend(element);
      } else {
        // Works like insertAfter but using insertBefore API.
        // nextSibling cannot be null because insertAfter
        // is always set to children[i-1], so it must exist
        spaceElement.insertBefore(element, insertAfter.nextSibling);
      }
      return true;
    }
  }, {
    key: "addBlock",
    value: function addBlock(procedureCode, _ref5) {
      var args = _ref5.args,
        displayName = _ref5.displayName,
        callback = _ref5.callback;
      var procCodeArguments = parseArguments(procedureCode);
      if (args.length !== procCodeArguments.length) {
        throw new Error('Procedure code and argument list do not match');
      }
      if (displayName) {
        displayName = fixDisplayName(displayName);
        var displayNameArguments = parseArguments(displayName);
        if (!compareArrays(procCodeArguments, displayNameArguments)) {
          console.warn("displayName ".concat(displayName, " for ").concat(procedureCode, " has invalid arguments, ignoring it."));
          displayName = procedureCode;
        }
      } else {
        displayName = procedureCode;
      }
      var wrappedCallback = function wrappedCallback(a, util) {
        return callback(a, util.thread);
      };
      var vm = this.traps.vm;
      vm.addAddonBlock({
        procedureCode: procedureCode,
        arguments: args,
        callback: wrappedCallback,
        // Ignored by VM but used by scratch-blocks traps
        displayName: displayName
      });
      if (!_firstAddBlockRan) {
        _firstAddBlockRan = true;
        this.traps.getBlockly().then(function (ScratchBlocks) {
          var BlockSvg = ScratchBlocks.BlockSvg;
          var oldUpdateColour = BlockSvg.prototype.updateColour;
          BlockSvg.prototype.updateColour = function () {
            // procedures_prototype also has a procedure code but we do not want to color them.
            if (!this.isInsertionMarker() && this.type === 'procedures_call') {
              var block = this.procCode_ && vm.runtime.getAddonBlock(this.procCode_);
              if (block) {
                var theme = _redux__WEBPACK_IMPORTED_MODULE_14__["default"].state.scratchGui.theme.theme;
                var colors = theme.getBlockColors().addons;
                this.colour_ = colors.primary;
                this.colourSecondary_ = colors.secondary;
                this.colourTertiary_ = colors.tertiary;
                this.colourQuaternary_ = colors.quaternary;

                // do not show edit button
                this.customContextMenu = null;
              }
            }
            for (var _len = arguments.length, args2 = new Array(_len), _key = 0; _key < _len; _key++) {
              args2[_key] = arguments[_key];
            }
            return oldUpdateColour.call.apply(oldUpdateColour, [this].concat(args2));
          };
          var originalCreateAllInputs = ScratchBlocks.Blocks.procedures_call.createAllInputs_;
          ScratchBlocks.Blocks.procedures_call.createAllInputs_ = function () {
            var block = this.procCode_ && vm.runtime.getAddonBlock(this.procCode_);
            for (var _len2 = arguments.length, args2 = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
              args2[_key2] = arguments[_key2];
            }
            if (block && block.displayName) {
              var originalProcCode = this.procCode_;
              this.procCode_ = block.displayName;
              var ret = originalCreateAllInputs.call.apply(originalCreateAllInputs, [this].concat(args2));
              this.procCode_ = originalProcCode;
              return ret;
            }
            return originalCreateAllInputs.call.apply(originalCreateAllInputs, [this].concat(args2));
          };
          if (vm.editingTarget) {
            vm.emitWorkspaceUpdate();
          }
        });
      }
    }
  }, {
    key: "getCustomBlock",
    value: function getCustomBlock(procedureCode) {
      var vm = this.traps.vm;
      return vm.getAddonBlock(procedureCode);
    }
  }, {
    key: "createBlockContextMenu",
    value: function createBlockContextMenu(callback) {
      var _ref6 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
        _ref6$workspace = _ref6.workspace,
        workspace = _ref6$workspace === void 0 ? false : _ref6$workspace,
        _ref6$blocks = _ref6.blocks,
        blocks = _ref6$blocks === void 0 ? false : _ref6$blocks,
        _ref6$flyout = _ref6.flyout,
        flyout = _ref6$flyout === void 0 ? false : _ref6$flyout,
        _ref6$comments = _ref6.comments,
        comments = _ref6$comments === void 0 ? false : _ref6$comments;
      contextMenuCallbacks.push({
        addonId: this._id,
        callback: callback,
        workspace: workspace,
        blocks: blocks,
        flyout: flyout,
        comments: comments
      });
      contextMenuCallbacks.sort(function (b, a) {
        return CONTEXT_MENU_ORDER.indexOf(b.addonId) - CONTEXT_MENU_ORDER.indexOf(a.addonId);
      });
      if (createdAnyBlockContextMenus) return;
      createdAnyBlockContextMenus = true;
      this.traps.getBlockly().then(function (ScratchBlocks) {
        var oldShow = ScratchBlocks.ContextMenu.show;
        ScratchBlocks.ContextMenu.show = function (event, items, rtl) {
          var gesture = ScratchBlocks.mainWorkspace.currentGesture_;
          var block = gesture.targetBlock_;

          // eslint-disable-next-line no-shadow
          for (var _i = 0, _contextMenuCallbacks = contextMenuCallbacks; _i < _contextMenuCallbacks.length; _i++) {
            var _contextMenuCallbacks2 = _contextMenuCallbacks[_i],
              _callback2 = _contextMenuCallbacks2.callback,
              _workspace = _contextMenuCallbacks2.workspace,
              _blocks = _contextMenuCallbacks2.blocks,
              _flyout = _contextMenuCallbacks2.flyout,
              _comments = _contextMenuCallbacks2.comments;
            var injectMenu =
            // Workspace
            _workspace && !block && !gesture.flyout_ && !gesture.startBubble_ ||
            // Block in workspace
            _blocks && block && !gesture.flyout_ ||
            // Block in flyout
            _flyout && gesture.flyout_ ||
            // Comments
            _comments && gesture.startBubble_;
            if (injectMenu) {
              try {
                items = _callback2(items, block);
              } catch (e) {
                console.error('Error while calling context menu callback: ', e);
              }
            }
          }
          oldShow.call(this, event, items, rtl);
          var blocklyContextMenu = ScratchBlocks.WidgetDiv.DIV.firstChild;
          items.forEach(function (item, i) {
            if (i !== 0 && item.separator) {
              var itemElt = blocklyContextMenu.children[i];
              itemElt.style.paddingTop = '2px';
              itemElt.classList.add('sa-blockly-menu-item-border');
              itemElt.style.borderTop = '1px solid var(--ui-black-transparent)';
            }
          });
        };
      });
    }
  }, {
    key: "createEditorContextMenu",
    value: function createEditorContextMenu(callback, options) {
      Object(_contextmenu__WEBPACK_IMPORTED_MODULE_9__["addContextMenu"])(this, callback, options);
    }
  }, {
    key: "copyImage",
    value: function copyImage(dataURL) {
      if (!navigator.clipboard.write) {
        return Promise.reject(new Error('Clipboard API not supported'));
      }
      var items = [
      // eslint-disable-next-line no-undef
      new ClipboardItem({
        'image/png': Object(_lib_data_uri_to_blob__WEBPACK_IMPORTED_MODULE_2__["default"])(dataURL)
      })];
      return navigator.clipboard.write(items);
    }
  }, {
    key: "scratchMessage",
    value: function scratchMessage(id) {
      return _redux__WEBPACK_IMPORTED_MODULE_14__["default"].state.locales.messages[id];
    }
  }, {
    key: "scratchClassReady",
    value: function scratchClassReady() {
      // they are always ready
      return Promise.resolve();
    }
  }, {
    key: "scratchClass",
    value: function scratchClass() {
      var scratchClasses = getScratchClassNames();
      var classes = [];
      for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {
        args[_key3] = arguments[_key3];
      }
      for (var _i2 = 0, _args3 = args; _i2 < _args3.length; _i2++) {
        var arg = _args3[_i2];
        if (typeof arg === 'string') {
          var _iterator7 = _createForOfIteratorHelper(scratchClasses),
            _step7;
          try {
            for (_iterator7.s(); !(_step7 = _iterator7.n()).done;) {
              var _scratchClass = _step7.value;
              if (_scratchClass.startsWith("".concat(arg, "_")) && _scratchClass.length === arg.length + 6) {
                classes.push(_scratchClass);
                break;
              }
            }
          } catch (err) {
            _iterator7.e(err);
          } finally {
            _iterator7.f();
          }
        }
      }
      var options = args[args.length - 1];
      if (_typeof(options) === 'object') {
        var others = Array.isArray(options.others) ? options.others : [options.others];
        var _iterator8 = _createForOfIteratorHelper(others),
          _step8;
        try {
          for (_iterator8.s(); !(_step8 = _iterator8.n()).done;) {
            var className = _step8.value;
            classes.push(className);
          }
        } catch (err) {
          _iterator8.e(err);
        } finally {
          _iterator8.f();
        }
      }
      return classes.join(' ');
    }
  }, {
    key: "editorMode",
    get: function get() {
      return getEditorMode();
    }
  }, {
    key: "displayNoneWhileDisabled",
    value: function displayNoneWhileDisabled(el, options) {
      el.classList.add(getDisplayNoneWhileDisabledClass(this._id));
      if (options && options.display) {
        el.style.display = options.display;
      }
    }
  }, {
    key: "direction",
    get: function get() {
      return this.redux.state.locales.isRtl ? 'rtl' : 'ltr';
    }
  }, {
    key: "createModal",
    value: function createModal(title) {
      var _ref7 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
        _ref7$isOpen = _ref7.isOpen,
        isOpen = _ref7$isOpen === void 0 ? false : _ref7$isOpen;
      return _modal__WEBPACK_IMPORTED_MODULE_10__["createEditorModal"](this, title, {
        isOpen: isOpen
      });
    }
  }, {
    key: "confirm",
    value: function confirm() {
      for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {
        args[_key4] = arguments[_key4];
      }
      return _modal__WEBPACK_IMPORTED_MODULE_10__["confirm"].apply(_modal__WEBPACK_IMPORTED_MODULE_10__, [this].concat(args));
    }
  }, {
    key: "prompt",
    value: function prompt() {
      for (var _len5 = arguments.length, args = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {
        args[_key5] = arguments[_key5];
      }
      return _modal__WEBPACK_IMPORTED_MODULE_10__["prompt"].apply(_modal__WEBPACK_IMPORTED_MODULE_10__, [this].concat(args));
    }
  }, {
    key: "recolorable",
    value: function recolorable() {
      // this is some pretty awful code that makes a *lot* of assumptions about how addons work

      var image = document.createElement('img');
      var svg = '';
      var updateRealSrc = function updateRealSrc() {
        var newSrc = svg.replace(/#855cd6/gi, window.Recolor.primary);
        var nativeSrcSetter = Object.getOwnPropertyDescriptor(window.HTMLImageElement.prototype, 'src').set;
        nativeSrcSetter.call(image, "data:image/svg+xml;,".concat(encodeURIComponent(newSrc)));
      };
      Object.defineProperty(image, 'src', {
        get: function get() {
          // return the 'original' source, roughly
          if (!svg) return '';
          return "data:image/svg+xml;,".concat(encodeURIComponent(svg));
        },
        set: function set(newSrc) {
          // we assume it is a base64-encoded data: URI that is supported by atob()
          var base64 = newSrc.split(';base64,')[1];
          svg = atob(base64);
          updateRealSrc();
        }
      });

      // this leaks memory if an addon creates these disposably
      _hooks__WEBPACK_IMPORTED_MODULE_4__["default"].recolorCallbacks.push(updateRealSrc);
      return image;
    }
  }]);
}(_event_target__WEBPACK_IMPORTED_MODULE_3__["default"]);
var Settings = /*#__PURE__*/function (_EventTargetShim2) {
  function Settings(addonId, manifest) {
    var _this4;
    _classCallCheck(this, Settings);
    _this4 = _callSuper(this, Settings);
    _this4._addonId = addonId;
    _this4._manifest = manifest;
    return _this4;
  }
  _inherits(Settings, _EventTargetShim2);
  return _createClass(Settings, [{
    key: "get",
    value: function get(id) {
      return _settings_store_singleton__WEBPACK_IMPORTED_MODULE_1__["default"].getAddonSetting(this._addonId, id);
    }
  }]);
}(_event_target__WEBPACK_IMPORTED_MODULE_3__["default"]);
var Self = /*#__PURE__*/function (_EventTargetShim3) {
  function Self(id, getResource) {
    var _this5;
    _classCallCheck(this, Self);
    _this5 = _callSuper(this, Self);
    _this5.id = id;
    _this5.disabled = false;
    _this5.getResource = getResource;
    return _this5;
  }
  _inherits(Self, _EventTargetShim3);
  return _createClass(Self);
}(_event_target__WEBPACK_IMPORTED_MODULE_3__["default"]);
var AddonRunner = /*#__PURE__*/function () {
  function AddonRunner(id) {
    _classCallCheck(this, AddonRunner);
    AddonRunner.instances.push(this);
    var manifest = _generated_addon_manifests__WEBPACK_IMPORTED_MODULE_5__["default"][id];
    this.id = id;
    this.manifest = manifest;
    this.messageCache = {};
    this.loading = true;

    /**
     * @type {Record<string, unknown>}
     */
    this.resources = null;
    this.publicAPI = {
      global: global,
      console: console,
      addon: {
        tab: new Tab(id),
        settings: new Settings(id, manifest),
        self: new Self(id, this.getResource.bind(this))
      },
      msg: this.msg.bind(this),
      safeMsg: this.safeMsg.bind(this)
    };
  }
  return _createClass(AddonRunner, [{
    key: "_msg",
    value: function _msg(key, vars, handler) {
      var namespacedKey = key.startsWith('/') ? key.substring(1) : "".concat(this.id, "/").concat(key);
      if (this.messageCache[namespacedKey]) {
        return this.messageCache[namespacedKey].format(vars);
      }
      var translation = _addons_l10n_en_json__WEBPACK_IMPORTED_MODULE_6__[namespacedKey];
      if (!translation) {
        return namespacedKey;
      }
      if (handler) {
        translation = handler(translation);
      }
      var messageFormat = new intl_messageformat__WEBPACK_IMPORTED_MODULE_0___default.a(translation, language);
      this.messageCache[namespacedKey] = messageFormat;
      return messageFormat.format(vars);
    }
  }, {
    key: "msg",
    value: function msg(key, vars) {
      return this._msg(key, vars, null);
    }
  }, {
    key: "safeMsg",
    value: function safeMsg(key, vars) {
      return this._msg(key, vars, escapeHTML);
    }
  }, {
    key: "getResource",
    value: function getResource(path) {
      var withoutSlash = path.substring(1);
      var url = this.resources[withoutSlash];
      if (typeof url !== 'string') {
        throw new Error("Unknown asset: ".concat(path));
      }
      return url;
    }
  }, {
    key: "updateAllStyles",
    value: function updateAllStyles() {
      _conditional_style__WEBPACK_IMPORTED_MODULE_12__["updateAll"]();
      this.updateCssVariables();
    }
  }, {
    key: "updateCssVariables",
    value: function updateCssVariables() {
      var addonId = kebabCaseToCamelCase(this.id);
      if (this.manifest.settings) {
        var _iterator9 = _createForOfIteratorHelper(this.manifest.settings),
          _step9;
        try {
          for (_iterator9.s(); !(_step9 = _iterator9.n()).done;) {
            var setting = _step9.value;
            var settingId = setting.id;
            var cssProperty = "--".concat(addonId, "-").concat(kebabCaseToCamelCase(settingId));
            var value = this.publicAPI.addon.settings.get(settingId);
            document.documentElement.style.setProperty(cssProperty, value);
          }
        } catch (err) {
          _iterator9.e(err);
        } finally {
          _iterator9.f();
        }
      }
      if (this.manifest.customCssVariables) {
        var _iterator10 = _createForOfIteratorHelper(this.manifest.customCssVariables),
          _step10;
        try {
          for (_iterator10.s(); !(_step10 = _iterator10.n()).done;) {
            var variable = _step10.value;
            var name = variable.name;
            var _cssProperty = "--".concat(addonId, "-").concat(name);
            var _value = variable.value;
            var evaluated = this.evaluateCustomCssVariable(_value);
            document.documentElement.style.setProperty(_cssProperty, evaluated);
          }
        } catch (err) {
          _iterator10.e(err);
        } finally {
          _iterator10.f();
        }
      }
    }
  }, {
    key: "evaluateCustomCssVariable",
    value: function evaluateCustomCssVariable(variable) {
      if (_typeof(variable) !== 'object' || variable === null) {
        return variable;
      }
      switch (variable.type) {
        case 'alphaBlend':
          {
            var opaqueSource = this.evaluateCustomCssVariable(variable.opaqueSource);
            var transparentSource = this.evaluateCustomCssVariable(variable.transparentSource);
            return _libraries_common_cs_text_color_esm_js__WEBPACK_IMPORTED_MODULE_11__["alphaBlend"](opaqueSource, transparentSource);
          }
        case 'alphaThreshold':
          {
            var source = this.evaluateCustomCssVariable(variable.source);
            var alpha = _libraries_common_cs_text_color_esm_js__WEBPACK_IMPORTED_MODULE_11__["parseHex"](source).a;
            var threshold = this.evaluateCustomCssVariable(variable.threshold) || 0.5;
            if (alpha >= threshold) {
              return this.evaluateCustomCssVariable(variable.opaque);
            }
            return this.evaluateCustomCssVariable(variable.transparent);
          }
        case 'brighten':
          {
            var _source = this.evaluateCustomCssVariable(variable.source);
            return _libraries_common_cs_text_color_esm_js__WEBPACK_IMPORTED_MODULE_11__["brighten"](_source, variable);
          }
        case 'makeHsv':
          {
            var h = this.evaluateCustomCssVariable(variable.h);
            var s = this.evaluateCustomCssVariable(variable.s);
            var v = this.evaluateCustomCssVariable(variable.v);
            return _libraries_common_cs_text_color_esm_js__WEBPACK_IMPORTED_MODULE_11__["makeHsv"](h, s, v);
          }
        case 'map':
          {
            return variable.options[this.evaluateCustomCssVariable(variable.source)];
          }
        case 'multiply':
          {
            var hex = this.evaluateCustomCssVariable(variable.source);
            return _libraries_common_cs_text_color_esm_js__WEBPACK_IMPORTED_MODULE_11__["multiply"](hex, variable);
          }
        case 'recolorFilter':
          {
            var _source2 = this.evaluateCustomCssVariable(variable.source);
            return _libraries_common_cs_text_color_esm_js__WEBPACK_IMPORTED_MODULE_11__["recolorFilter"](_source2);
          }
        case 'settingValue':
          {
            return this.publicAPI.addon.settings.get(variable.settingId);
          }
        case 'ternary':
          {
            var condition = this.evaluateCustomCssVariable(variable.source);
            return this.evaluateCustomCssVariable(condition ? variable["true"] : variable["false"]);
          }
        case 'textColor':
          {
            var _hex = this.evaluateCustomCssVariable(variable.source);
            var black = this.evaluateCustomCssVariable(variable.black);
            var white = this.evaluateCustomCssVariable(variable.white);
            var _threshold = this.evaluateCustomCssVariable(variable.threshold);
            return _libraries_common_cs_text_color_esm_js__WEBPACK_IMPORTED_MODULE_11__["textColor"](_hex, black, white, _threshold);
          }
      }
      console.warn("Unknown customCssVariable", variable);
      return '#000000';
    }
  }, {
    key: "settingsChanged",
    value: function settingsChanged() {
      this.updateAllStyles();
      this.publicAPI.addon.settings.dispatchEvent(new CustomEvent('change'));
    }
  }, {
    key: "dynamicEnable",
    value: function dynamicEnable() {
      if (this.loading) {
        return;
      }

      // This order is important. We need to update styles before calling the addon's dynamic
      // toggle event. We also need to update `disabled` before we can update styles because
      // the ConditionalStyle callbacks are implemented using the API.
      this.publicAPI.addon.self.disabled = false;
      this.updateAllStyles();
      this.publicAPI.addon.self.dispatchEvent(new CustomEvent('reenabled'));
    }
  }, {
    key: "dynamicDisable",
    value: function dynamicDisable() {
      if (this.loading) {
        return;
      }

      // See comment in dynamicEnable().
      this.publicAPI.addon.self.disabled = true;
      this.updateAllStyles();
      this.publicAPI.addon.self.dispatchEvent(new CustomEvent('disabled'));
    }
  }, {
    key: "run",
    value: function () {
      var _run = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {
        var _this6 = this;
        var mod, baseStylePrecedence, _loop, i, disabledCSS, disabledStylesheet, _iterator12, _step12, userscript, fn;
        return _regeneratorRuntime().wrap(function _callee3$(_context4) {
          while (1) switch (_context4.prev = _context4.next) {
            case 0:
              if (!this.manifest.editorOnly) {
                _context4.next = 3;
                break;
              }
              _context4.next = 3;
              return untilInEditor();
            case 3:
              _context4.next = 5;
              return _generated_addon_entries__WEBPACK_IMPORTED_MODULE_8__["default"][this.id]();
            case 5:
              mod = _context4.sent;
              this.resources = mod.resources;
              if (this.manifest.noTranslations) {
                _context4.next = 10;
                break;
              }
              _context4.next = 10;
              return addonMessagesPromise;
            case 10:
              // Multiply by big number because the first userstyle is + 0, second is + 1, third is + 2, etc.
              // This number just has to be larger than the maximum number of userstyles in a single addon.
              baseStylePrecedence = Object(_addon_precedence__WEBPACK_IMPORTED_MODULE_13__["default"])(this.id) * 100;
              if (!this.manifest.userstyles) {
                _context4.next = 19;
                break;
              }
              _loop = /*#__PURE__*/_regeneratorRuntime().mark(function _loop() {
                var userstyle, userstylePrecedence, userstyleCondition, _iterator11, _step11, _step11$value, moduleId, cssText, sheet;
                return _regeneratorRuntime().wrap(function _loop$(_context3) {
                  while (1) switch (_context3.prev = _context3.next) {
                    case 0:
                      userstyle = _this6.manifest.userstyles[i];
                      userstylePrecedence = baseStylePrecedence + i;
                      userstyleCondition = function userstyleCondition() {
                        return !_this6.publicAPI.addon.self.disabled && _settings_store_singleton__WEBPACK_IMPORTED_MODULE_1__["default"].evaluateCondition(_this6.id, userstyle["if"]);
                      };
                      _iterator11 = _createForOfIteratorHelper(_this6.resources[userstyle.url]);
                      try {
                        for (_iterator11.s(); !(_step11 = _iterator11.n()).done;) {
                          _step11$value = _slicedToArray(_step11.value, 2), moduleId = _step11$value[0], cssText = _step11$value[1];
                          sheet = _conditional_style__WEBPACK_IMPORTED_MODULE_12__["create"](moduleId, cssText);
                          sheet.addDependent(_this6.id, userstylePrecedence, userstyleCondition);
                        }
                      } catch (err) {
                        _iterator11.e(err);
                      } finally {
                        _iterator11.f();
                      }
                    case 5:
                    case "end":
                      return _context3.stop();
                  }
                }, _loop);
              });
              i = 0;
            case 14:
              if (!(i < this.manifest.userstyles.length)) {
                _context4.next = 19;
                break;
              }
              return _context4.delegateYield(_loop(), "t0", 16);
            case 16:
              i++;
              _context4.next = 14;
              break;
            case 19:
              disabledCSS = ".".concat(getDisplayNoneWhileDisabledClass(this.id), "{display:none !important;}");
              disabledStylesheet = _conditional_style__WEBPACK_IMPORTED_MODULE_12__["create"]("_disabled/".concat(this.id), disabledCSS);
              disabledStylesheet.addDependent(this.id, baseStylePrecedence, function () {
                return _this6.publicAPI.addon.self.disabled;
              });
              this.updateCssVariables();
              if (!this.manifest.userscripts) {
                _context4.next = 43;
                break;
              }
              _iterator12 = _createForOfIteratorHelper(this.manifest.userscripts);
              _context4.prev = 25;
              _iterator12.s();
            case 27:
              if ((_step12 = _iterator12.n()).done) {
                _context4.next = 35;
                break;
              }
              userscript = _step12.value;
              if (_settings_store_singleton__WEBPACK_IMPORTED_MODULE_1__["default"].evaluateCondition(userscript["if"])) {
                _context4.next = 31;
                break;
              }
              return _context4.abrupt("continue", 33);
            case 31:
              fn = this.resources[userscript.url];
              fn(this.publicAPI);
            case 33:
              _context4.next = 27;
              break;
            case 35:
              _context4.next = 40;
              break;
            case 37:
              _context4.prev = 37;
              _context4.t1 = _context4["catch"](25);
              _iterator12.e(_context4.t1);
            case 40:
              _context4.prev = 40;
              _iterator12.f();
              return _context4.finish(40);
            case 43:
              this.loading = false;
            case 44:
            case "end":
              return _context4.stop();
          }
        }, _callee3, this, [[25, 37, 40, 43]]);
      }));
      function run() {
        return _run.apply(this, arguments);
      }
      return run;
    }()
  }]);
}();
AddonRunner.instances = [];
var runAddon = function runAddon(addonId) {
  var runner = new AddonRunner(addonId);
  runner.run();
};
_settings_store_singleton__WEBPACK_IMPORTED_MODULE_1__["default"].addEventListener('addon-changed', function (e) {
  var addonId = e.detail.addonId;
  var runner = AddonRunner.instances.find(function (i) {
    return i.id === addonId;
  });
  if (runner) {
    runner.settingsChanged();
  }
  if (e.detail.dynamicEnable) {
    if (runner) {
      runner.dynamicEnable();
    } else {
      runAddon(addonId);
    }
  } else if (e.detail.dynamicDisable) {
    if (runner) {
      runner.dynamicDisable();
    }
  }
});
for (var _i3 = 0, _Object$keys = Object.keys(_generated_addon_manifests__WEBPACK_IMPORTED_MODULE_5__["default"]); _i3 < _Object$keys.length; _i3++) {
  var id = _Object$keys[_i3];
  if (!_settings_store_singleton__WEBPACK_IMPORTED_MODULE_1__["default"].getAddonEnabled(id)) {
    continue;
  }
  runAddon(id);
}
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../node_modules/webpack/buildin/global.js */ "./node_modules/webpack/buildin/global.js")))

/***/ }),

/***/ "./src/addons/conditional-style.js":
/*!*****************************************!*\
  !*** ./src/addons/conditional-style.js ***!
  \*****************************************/
/*! exports provided: create, updateAll */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "create", function() { return create; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "updateAll", function() { return updateAll; });
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }
function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t["return"] && (u = t["return"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }
function _arrayWithHoles(r) { if (Array.isArray(r)) return r; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _createForOfIteratorHelper(r, e) { var t = "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (!t) { if (Array.isArray(r) || (t = _unsupportedIterableToArray(r)) || e && r && "number" == typeof r.length) { t && (r = t); var _n = 0, F = function F() {}; return { s: F, n: function n() { return _n >= r.length ? { done: !0 } : { done: !1, value: r[_n++] }; }, e: function e(r) { throw r; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var o, a = !0, u = !1; return { s: function s() { t = t.call(r); }, n: function n() { var r = t.next(); return a = r.done, r; }, e: function e(r) { u = !0, o = r; }, f: function f() { try { a || null == t["return"] || t["return"](); } finally { if (u) throw o; } } }; }
function _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }
function _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
// Stylesheets are added at the end of <body> so that they have higher precedence
// than those in <head> and above dark mode which is appended at the start of <body>
var stylesheetContainer = document.createElement('div');
stylesheetContainer.style.display = 'none';
stylesheetContainer.className = 'addons-styles';
document.body.appendChild(stylesheetContainer);

/**
 * Maps opaque module IDs to its ConditionalStyle.
 * @type {Map<unknown, ConditionalStyle>}
 */
var allSheets = new Map();

/**
 * Determine if the contents of a list are equal (===) to each other.
 * @param {unknown[]} a The first list
 * @param {unknown[]} b The second list
 * @returns {boolean} true if the lists are identical
 */
var areArraysEqual = function areArraysEqual(a, b) {
  if (a.length !== b.length) {
    return false;
  }
  for (var i = 0; i < a.length; a++) {
    if (a[i] !== b[i]) {
      return false;
    }
  }
  return true;
};
var updateAll = function updateAll() {
  var _iterator = _createForOfIteratorHelper(allSheets.values()),
    _step;
  try {
    for (_iterator.s(); !(_step = _iterator.n()).done;) {
      var sheet = _step.value;
      sheet.update();
    }
  } catch (err) {
    _iterator.e(err);
  } finally {
    _iterator.f();
  }
};
var ConditionalStyle = /*#__PURE__*/function () {
  /**
   * @param {string} styleText CSS text
   */
  function ConditionalStyle(styleText) {
    _classCallCheck(this, ConditionalStyle);
    /**
     * Lazily created <style> element.
     * @type {HTMLStyleElement}
     */
    this.el = null;

    /**
     * Temporary storing place for the CSS text until the style sheet is created.
     * @type {string|null}
     */
    this.styleText = styleText;

    /**
     * Higher number indicates this element should override lower numbers.
     * @type {number}
     */
    this.precedence = 0;

    /**
     * List of [addonId, condition] tuples.
     * @type {Array<[string, () => boolean>]}
     */
    this.dependents = [];

    /**
     * List of addonIds that were enabled on the previous call to update()
     * @type {string[]}
     */
    this.previousEnabledDependents = [];
  }
  return _createClass(ConditionalStyle, [{
    key: "addDependent",
    value: function addDependent(addonId, precedence, condition) {
      this.dependents.push([addonId, condition]);
      if (precedence > this.precedence) {
        this.precedence = precedence;
        if (this.el) {
          this.el.dataset.precedence = precedence;
        }
      }
      this.update();
    }
  }, {
    key: "getEnabledDependents",
    value: function getEnabledDependents() {
      var enabledDependents = [];
      var _iterator2 = _createForOfIteratorHelper(this.dependents),
        _step2;
      try {
        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
          var _step2$value = _slicedToArray(_step2.value, 2),
            addonId = _step2$value[0],
            condition = _step2$value[1];
          if (condition()) {
            enabledDependents.push(addonId);
          }
        }
      } catch (err) {
        _iterator2.e(err);
      } finally {
        _iterator2.f();
      }
      return enabledDependents;
    }
  }, {
    key: "dependsOn",
    value: function dependsOn(addonId) {
      return this.dependents.some(function (dependent) {
        return dependent[0] === addonId;
      });
    }
  }, {
    key: "getElement",
    value: function getElement() {
      if (!this.el) {
        var el = document.createElement('style');
        el.className = 'scratch-addons-style';
        el.dataset.precedence = this.precedence;
        el.textContent = this.styleText;
        this.styleText = null;
        this.el = el;
      }
      return this.el;
    }
  }, {
    key: "update",
    value: function update() {
      var enabledDependents = this.getEnabledDependents();
      if (areArraysEqual(enabledDependents, this.previousEnabledDependents)) {
        // Nothing to do.
        return;
      }
      this.previousEnabledDependents = enabledDependents;
      if (enabledDependents.length > 0) {
        var el = this.getElement();
        el.dataset.addons = enabledDependents.join(',');
        var _iterator3 = _createForOfIteratorHelper(stylesheetContainer.children),
          _step3;
        try {
          for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
            var child = _step3.value;
            var otherPrecedence = +child.dataset.precedence || 0;
            if (otherPrecedence >= this.precedence) {
              // We need to be before this style.
              stylesheetContainer.insertBefore(el, child);
              return;
            }
          }

          // We have higher precedence than all existing stylesheets.
        } catch (err) {
          _iterator3.e(err);
        } finally {
          _iterator3.f();
        }
        stylesheetContainer.appendChild(el);
      } else if (this.el) {
        this.el.remove();
      }
    }
  }]);
}();
var create = function create(moduleId, styleText) {
  if (!allSheets.get(moduleId)) {
    var newSheet = new ConditionalStyle(styleText);
    allSheets.set(moduleId, newSheet);
  }
  return allSheets.get(moduleId);
};


/***/ }),

/***/ "./src/addons/contextmenu.js":
/*!***********************************!*\
  !*** ./src/addons/contextmenu.js ***!
  \***********************************/
/*! exports provided: addContextMenu */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "addContextMenu", function() { return addContextMenu; });
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _createForOfIteratorHelper(r, e) { var t = "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (!t) { if (Array.isArray(r) || (t = _unsupportedIterableToArray(r)) || e && r && "number" == typeof r.length) { t && (r = t); var _n = 0, F = function F() {}; return { s: F, n: function n() { return _n >= r.length ? { done: !0 } : { done: !1, value: r[_n++] }; }, e: function e(r) { throw r; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var o, a = !0, u = !1; return { s: function s() { t = t.call(r); }, n: function n() { var r = t.next(); return a = r.done, r; }, e: function e(r) { u = !0, o = r; }, f: function f() { try { a || null == t["return"] || t["return"](); } finally { if (u) throw o; } } }; }
function _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }
function _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
// This file is imported from
// https://github.com/ScratchAddons/ScratchAddons/blob/master/addon-api/content-script/contextmenu.js

/* eslint-disable */

var initialized = false;
var hasDynamicContextMenu = false;
var contextMenus = [];
var onReactContextMenu = function onReactContextMenu(e) {
  var _this = this,
    _ctxTarget$this$traps10,
    _ctxTarget$this$traps11,
    _ctxTarget$this$traps12,
    _ctxTarget$this$traps13,
    _ctxTarget$this$traps14,
    _ctxTarget$this$traps15;
  if (!e.target) return;
  var ctxTarget = e.target.closest(".react-contextmenu-wrapper");
  if (!ctxTarget) return;
  var ctxMenu = ctxTarget.querySelector("nav.react-contextmenu");
  var type;
  var extra = {};
  if (false) { var props, mInternalId, _ctxTarget$this$traps, _ctxTarget$this$traps2, _ctxTarget$this$traps3, _ctxTarget$this$traps4, _ctxTarget$this$traps5, _ctxTarget$this$traps6, _ctxTarget$this$traps7, _ctxTarget$this$traps8, _ctxTarget$this$traps9; } else if ((_ctxTarget$this$traps10 = ctxTarget[this.traps.getInternalKey(ctxTarget)]) !== null && _ctxTarget$this$traps10 !== void 0 && (_ctxTarget$this$traps11 = _ctxTarget$this$traps10["return"]) !== null && _ctxTarget$this$traps11 !== void 0 && (_ctxTarget$this$traps12 = _ctxTarget$this$traps11["return"]) !== null && _ctxTarget$this$traps12 !== void 0 && (_ctxTarget$this$traps13 = _ctxTarget$this$traps12["return"]) !== null && _ctxTarget$this$traps13 !== void 0 && (_ctxTarget$this$traps14 = _ctxTarget$this$traps13.stateNode) !== null && _ctxTarget$this$traps14 !== void 0 && (_ctxTarget$this$traps15 = _ctxTarget$this$traps14.props) !== null && _ctxTarget$this$traps15 !== void 0 && _ctxTarget$this$traps15.dragType) {
    // SpriteSelectorItem which despite its name is used for costumes, sounds, backpacked script etc
    var _props = ctxTarget[this.traps.getInternalKey(ctxTarget)]["return"]["return"]["return"].stateNode.props;
    type = _props.dragType.toLowerCase();
    extra.name = _props.name;
    extra.itemId = _props.id;
    extra.index = _props.index;
  } else {
    return;
  }
  var ctx = _objectSpread({
    menuItem: ctxMenu,
    target: ctxTarget,
    type: type
  }, extra);
  Array.from(ctxMenu.children).forEach(function (existing) {
    if (existing.classList.contains("sa-ctx-menu")) existing.remove();
  });
  var _iterator = _createForOfIteratorHelper(hasDynamicContextMenu ? contextMenus.flatMap(function (menu) {
      return typeof menu === "function" ? menu(type, ctx) : menu;
    }) : contextMenus),
    _step;
  try {
    var _loop = function _loop() {
        var item = _step.value;
        if (!item) return 0; // continue
        if (item.types && !item.types.some(function (itemType) {
          return type === itemType;
        })) return 0; // continue
        if (item.condition && !item.condition(ctx)) return 0; // continue
        var itemElem = document.createElement("div");
        var classes = ["context-menu_menu-item"];
        if (item.border) classes.push("context-menu_menu-item-bordered");
        if (item.dangerous) classes.push("context-menu_menu-item-danger");
        itemElem.className = _this.scratchClass.apply(_this, classes.concat([{
          others: ["react-contextmenu-item", "sa-ctx-menu", item.className || ""]
        }]));
        var label = document.createElement("span");
        label.textContent = item.label;
        itemElem.append(label);
        _this.displayNoneWhileDisabled(itemElem, {
          display: "block"
        });
        itemElem.addEventListener("click", function (e) {
          e.stopPropagation();
          window.dispatchEvent(new CustomEvent("REACT_CONTEXTMENU_HIDE", {
            detail: {
              action: "REACT_CONTEXTMENU_HIDE"
            }
          }));
          item.callback(ctx);
        });
        _this.appendToSharedSpace({
          space: item.position,
          order: item.order,
          scope: ctxMenu,
          element: itemElem
        });
      },
      _ret;
    for (_iterator.s(); !(_step = _iterator.n()).done;) {
      _ret = _loop();
      if (_ret === 0) continue;
    }
  } catch (err) {
    _iterator.e(err);
  } finally {
    _iterator.f();
  }
  return;
};
var initialize = function initialize(tab) {
  if (initialized) return;
  initialized = true;
  document.body.addEventListener("contextmenu", function (e) {
    return onReactContextMenu.call(tab, e);
  }, {
    capture: true
  });
};
var addContextMenu = function addContextMenu(tab, callback, opts) {
  if (typeof opts === "undefined") {
    contextMenus.push(callback);
    hasDynamicContextMenu = true;
  } else {
    contextMenus.push(_objectSpread(_objectSpread({}, opts), {}, {
      callback: callback
    }));
  }
  initialize(tab);
};

/***/ }),

/***/ "./src/addons/generated/addon-entries.js":
/*!***********************************************!*\
  !*** ./src/addons/generated/addon-entries.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* generated by pull.js */
/* harmony default export */ __webpack_exports__["default"] = ({
  "cat-blocks": function catBlocks() {
    return __webpack_require__.e(/*! import() | addon-entry-cat-blocks */ "addon-entry-cat-blocks").then(__webpack_require__.bind(null, /*! ../addons/cat-blocks/_runtime_entry.js */ "./src/addons/addons/cat-blocks/_runtime_entry.js"));
  },
  "editor-devtools": function editorDevtools() {
    return __webpack_require__.e(/*! import() | addon-default-entry */ "addon-default-entry").then(__webpack_require__.bind(null, /*! ../addons/editor-devtools/_runtime_entry.js */ "./src/addons/addons/editor-devtools/_runtime_entry.js"));
  },
  "find-bar": function findBar() {
    return __webpack_require__.e(/*! import() | addon-default-entry */ "addon-default-entry").then(__webpack_require__.bind(null, /*! ../addons/find-bar/_runtime_entry.js */ "./src/addons/addons/find-bar/_runtime_entry.js"));
  },
  "middle-click-popup": function middleClickPopup() {
    return __webpack_require__.e(/*! import() | addon-default-entry */ "addon-default-entry").then(__webpack_require__.bind(null, /*! ../addons/middle-click-popup/_runtime_entry.js */ "./src/addons/addons/middle-click-popup/_runtime_entry.js"));
  },
  "jump-to-def": function jumpToDef() {
    return __webpack_require__(/*! ../addons/jump-to-def/_runtime_entry.js */ "./src/addons/addons/jump-to-def/_runtime_entry.js");
  },
  "reorder-custom-inputs": function reorderCustomInputs() {
    return __webpack_require__.e(/*! import() | addon-default-entry */ "addon-default-entry").then(__webpack_require__.bind(null, /*! ../addons/reorder-custom-inputs/_runtime_entry.js */ "./src/addons/addons/reorder-custom-inputs/_runtime_entry.js"));
  },
  "editor-searchable-dropdowns": function editorSearchableDropdowns() {
    return __webpack_require__.e(/*! import() | addon-default-entry */ "addon-default-entry").then(__webpack_require__.bind(null, /*! ../addons/editor-searchable-dropdowns/_runtime_entry.js */ "./src/addons/addons/editor-searchable-dropdowns/_runtime_entry.js"));
  },
  "data-category-tweaks-v2": function dataCategoryTweaksV2() {
    return __webpack_require__.e(/*! import() | addon-entry-data-category-tweaks-v2 */ "addon-entry-data-category-tweaks-v2").then(__webpack_require__.bind(null, /*! ../addons/data-category-tweaks-v2/_runtime_entry.js */ "./src/addons/addons/data-category-tweaks-v2/_runtime_entry.js"));
  },
  "block-palette-icons": function blockPaletteIcons() {
    return __webpack_require__.e(/*! import() | addon-entry-block-palette-icons */ "addon-entry-block-palette-icons").then(__webpack_require__.bind(null, /*! ../addons/block-palette-icons/_runtime_entry.js */ "./src/addons/addons/block-palette-icons/_runtime_entry.js"));
  },
  "hide-flyout": function hideFlyout() {
    return __webpack_require__.e(/*! import() | addon-entry-hide-flyout */ "addon-entry-hide-flyout").then(__webpack_require__.bind(null, /*! ../addons/hide-flyout/_runtime_entry.js */ "./src/addons/addons/hide-flyout/_runtime_entry.js"));
  },
  "mediarecorder": function mediarecorder() {
    return __webpack_require__.e(/*! import() | addon-entry-mediarecorder */ "addon-entry-mediarecorder").then(__webpack_require__.bind(null, /*! ../addons/mediarecorder/_runtime_entry.js */ "./src/addons/addons/mediarecorder/_runtime_entry.js"));
  },
  "drag-drop": function dragDrop() {
    return __webpack_require__(/*! ../addons/drag-drop/_runtime_entry.js */ "./src/addons/addons/drag-drop/_runtime_entry.js");
  },
  "debugger": function _debugger() {
    return __webpack_require__.e(/*! import() | addon-entry-debugger */ "addon-entry-debugger").then(__webpack_require__.bind(null, /*! ../addons/debugger/_runtime_entry.js */ "./src/addons/addons/debugger/_runtime_entry.js"));
  },
  "pause": function pause() {
    return __webpack_require__(/*! ../addons/pause/_runtime_entry.js */ "./src/addons/addons/pause/_runtime_entry.js");
  },
  "mute-project": function muteProject() {
    return __webpack_require__(/*! ../addons/mute-project/_runtime_entry.js */ "./src/addons/addons/mute-project/_runtime_entry.js");
  },
  "vol-slider": function volSlider() {
    return __webpack_require__.e(/*! import() | addon-entry-vol-slider */ "addon-entry-vol-slider").then(__webpack_require__.bind(null, /*! ../addons/vol-slider/_runtime_entry.js */ "./src/addons/addons/vol-slider/_runtime_entry.js"));
  },
  "clones": function clones() {
    return __webpack_require__.e(/*! import() | addon-entry-clones */ "addon-entry-clones").then(__webpack_require__.bind(null, /*! ../addons/clones/_runtime_entry.js */ "./src/addons/addons/clones/_runtime_entry.js"));
  },
  "mouse-pos": function mousePos() {
    return __webpack_require__.e(/*! import() | addon-entry-mouse-pos */ "addon-entry-mouse-pos").then(__webpack_require__.bind(null, /*! ../addons/mouse-pos/_runtime_entry.js */ "./src/addons/addons/mouse-pos/_runtime_entry.js"));
  },
  "color-picker": function colorPicker() {
    return __webpack_require__.e(/*! import() | addon-default-entry */ "addon-default-entry").then(__webpack_require__.bind(null, /*! ../addons/color-picker/_runtime_entry.js */ "./src/addons/addons/color-picker/_runtime_entry.js"));
  },
  "remove-sprite-confirm": function removeSpriteConfirm() {
    return __webpack_require__.e(/*! import() | addon-entry-remove-sprite-confirm */ "addon-entry-remove-sprite-confirm").then(__webpack_require__.bind(null, /*! ../addons/remove-sprite-confirm/_runtime_entry.js */ "./src/addons/addons/remove-sprite-confirm/_runtime_entry.js"));
  },
  "block-count": function blockCount() {
    return __webpack_require__.e(/*! import() | addon-entry-block-count */ "addon-entry-block-count").then(__webpack_require__.bind(null, /*! ../addons/block-count/_runtime_entry.js */ "./src/addons/addons/block-count/_runtime_entry.js"));
  },
  "onion-skinning": function onionSkinning() {
    return __webpack_require__.e(/*! import() | addon-default-entry */ "addon-default-entry").then(__webpack_require__.bind(null, /*! ../addons/onion-skinning/_runtime_entry.js */ "./src/addons/addons/onion-skinning/_runtime_entry.js"));
  },
  "paint-snap": function paintSnap() {
    return __webpack_require__.e(/*! import() | addon-entry-paint-snap */ "addon-entry-paint-snap").then(__webpack_require__.bind(null, /*! ../addons/paint-snap/_runtime_entry.js */ "./src/addons/addons/paint-snap/_runtime_entry.js"));
  },
  "default-costume-editor-color": function defaultCostumeEditorColor() {
    return __webpack_require__.e(/*! import() | addon-entry-default-costume-editor-color */ "addon-entry-default-costume-editor-color").then(__webpack_require__.bind(null, /*! ../addons/default-costume-editor-color/_runtime_entry.js */ "./src/addons/addons/default-costume-editor-color/_runtime_entry.js"));
  },
  "bitmap-copy": function bitmapCopy() {
    return __webpack_require__.e(/*! import() | addon-default-entry */ "addon-default-entry").then(__webpack_require__.bind(null, /*! ../addons/bitmap-copy/_runtime_entry.js */ "./src/addons/addons/bitmap-copy/_runtime_entry.js"));
  },
  "2d-color-picker": function dColorPicker() {
    return __webpack_require__.e(/*! import() | addon-entry-2d-color-picker */ "addon-entry-2d-color-picker").then(__webpack_require__.bind(null, /*! ../addons/2d-color-picker/_runtime_entry.js */ "./src/addons/addons/2d-color-picker/_runtime_entry.js"));
  },
  "paint-skew": function paintSkew() {
    return __webpack_require__.e(/*! import() | addon-default-entry */ "addon-default-entry").then(__webpack_require__.bind(null, /*! ../addons/paint-skew/_runtime_entry.js */ "./src/addons/addons/paint-skew/_runtime_entry.js"));
  },
  "better-img-uploads": function betterImgUploads() {
    return __webpack_require__.e(/*! import() | addon-entry-better-img-uploads */ "addon-entry-better-img-uploads").then(__webpack_require__.bind(null, /*! ../addons/better-img-uploads/_runtime_entry.js */ "./src/addons/addons/better-img-uploads/_runtime_entry.js"));
  },
  "pick-colors-from-stage": function pickColorsFromStage() {
    return __webpack_require__.e(/*! import() | addon-default-entry */ "addon-default-entry").then(__webpack_require__.bind(null, /*! ../addons/pick-colors-from-stage/_runtime_entry.js */ "./src/addons/addons/pick-colors-from-stage/_runtime_entry.js"));
  },
  "custom-block-shape": function customBlockShape() {
    return __webpack_require__.e(/*! import() | addon-entry-custom-block-shape */ "addon-entry-custom-block-shape").then(__webpack_require__.bind(null, /*! ../addons/custom-block-shape/_runtime_entry.js */ "./src/addons/addons/custom-block-shape/_runtime_entry.js"));
  },
  "editor-square-inputs": function editorSquareInputs() {
    return __webpack_require__.e(/*! import() | addon-entry-editor-square-inputs */ "addon-entry-editor-square-inputs").then(__webpack_require__.bind(null, /*! ../addons/editor-square-inputs/_runtime_entry.js */ "./src/addons/addons/editor-square-inputs/_runtime_entry.js"));
  },
  "zebra-striping": function zebraStriping() {
    return __webpack_require__.e(/*! import() | addon-entry-zebra-striping */ "addon-entry-zebra-striping").then(__webpack_require__.bind(null, /*! ../addons/zebra-striping/_runtime_entry.js */ "./src/addons/addons/zebra-striping/_runtime_entry.js"));
  },
  "editor-compact": function editorCompact() {
    return __webpack_require__.e(/*! import() | addon-entry-editor-compact */ "addon-entry-editor-compact").then(__webpack_require__.bind(null, /*! ../addons/editor-compact/_runtime_entry.js */ "./src/addons/addons/editor-compact/_runtime_entry.js"));
  },
  "custom-menu-bar": function customMenuBar() {
    return __webpack_require__.e(/*! import() | addon-entry-custom-menu-bar */ "addon-entry-custom-menu-bar").then(__webpack_require__.bind(null, /*! ../addons/custom-menu-bar/_runtime_entry.js */ "./src/addons/addons/custom-menu-bar/_runtime_entry.js"));
  },
  "editor-theme3": function editorTheme3() {
    return __webpack_require__.e(/*! import() | addon-entry-editor-theme3 */ "addon-entry-editor-theme3").then(__webpack_require__.bind(null, /*! ../addons/editor-theme3/_runtime_entry.js */ "./src/addons/addons/editor-theme3/_runtime_entry.js"));
  },
  "custom-block-text": function customBlockText() {
    return __webpack_require__.e(/*! import() | addon-entry-custom-block-text */ "addon-entry-custom-block-text").then(__webpack_require__.bind(null, /*! ../addons/custom-block-text/_runtime_entry.js */ "./src/addons/addons/custom-block-text/_runtime_entry.js"));
  },
  "editor-colored-context-menus": function editorColoredContextMenus() {
    return __webpack_require__.e(/*! import() | addon-entry-editor-colored-context-menus */ "addon-entry-editor-colored-context-menus").then(__webpack_require__.bind(null, /*! ../addons/editor-colored-context-menus/_runtime_entry.js */ "./src/addons/addons/editor-colored-context-menus/_runtime_entry.js"));
  },
  "editor-stage-left": function editorStageLeft() {
    return __webpack_require__.e(/*! import() | addon-entry-editor-stage-left */ "addon-entry-editor-stage-left").then(__webpack_require__.bind(null, /*! ../addons/editor-stage-left/_runtime_entry.js */ "./src/addons/addons/editor-stage-left/_runtime_entry.js"));
  },
  "editor-buttons-reverse-order": function editorButtonsReverseOrder() {
    return __webpack_require__.e(/*! import() | addon-entry-editor-buttons-reverse-order */ "addon-entry-editor-buttons-reverse-order").then(__webpack_require__.bind(null, /*! ../addons/editor-buttons-reverse-order/_runtime_entry.js */ "./src/addons/addons/editor-buttons-reverse-order/_runtime_entry.js"));
  },
  "variable-manager": function variableManager() {
    return __webpack_require__.e(/*! import() | addon-entry-variable-manager */ "addon-entry-variable-manager").then(__webpack_require__.bind(null, /*! ../addons/variable-manager/_runtime_entry.js */ "./src/addons/addons/variable-manager/_runtime_entry.js"));
  },
  "search-sprites": function searchSprites() {
    return __webpack_require__.e(/*! import() | addon-entry-search-sprites */ "addon-entry-search-sprites").then(__webpack_require__.bind(null, /*! ../addons/search-sprites/_runtime_entry.js */ "./src/addons/addons/search-sprites/_runtime_entry.js"));
  },
  "sprite-properties": function spriteProperties() {
    return __webpack_require__.e(/*! import() | addon-entry-sprite-properties */ "addon-entry-sprite-properties").then(__webpack_require__.bind(null, /*! ../addons/sprite-properties/_runtime_entry.js */ "./src/addons/addons/sprite-properties/_runtime_entry.js"));
  },
  "gamepad": function gamepad() {
    return __webpack_require__.e(/*! import() | addon-entry-gamepad */ "addon-entry-gamepad").then(__webpack_require__.bind(null, /*! ../addons/gamepad/_runtime_entry.js */ "./src/addons/addons/gamepad/_runtime_entry.js"));
  },
  "editor-sounds": function editorSounds() {
    return __webpack_require__.e(/*! import() | addon-entry-editor-sounds */ "addon-entry-editor-sounds").then(__webpack_require__.bind(null, /*! ../addons/editor-sounds/_runtime_entry.js */ "./src/addons/addons/editor-sounds/_runtime_entry.js"));
  },
  "folders": function folders() {
    return __webpack_require__.e(/*! import() | addon-default-entry */ "addon-default-entry").then(__webpack_require__.bind(null, /*! ../addons/folders/_runtime_entry.js */ "./src/addons/addons/folders/_runtime_entry.js"));
  },
  "block-switching": function blockSwitching() {
    return __webpack_require__.e(/*! import() | addon-default-entry */ "addon-default-entry").then(__webpack_require__.bind(null, /*! ../addons/block-switching/_runtime_entry.js */ "./src/addons/addons/block-switching/_runtime_entry.js"));
  },
  "load-extensions": function loadExtensions() {
    return __webpack_require__.e(/*! import() | addon-entry-load-extensions */ "addon-entry-load-extensions").then(__webpack_require__.bind(null, /*! ../addons/load-extensions/_runtime_entry.js */ "./src/addons/addons/load-extensions/_runtime_entry.js"));
  },
  "custom-zoom": function customZoom() {
    return __webpack_require__.e(/*! import() | addon-entry-custom-zoom */ "addon-entry-custom-zoom").then(__webpack_require__.bind(null, /*! ../addons/custom-zoom/_runtime_entry.js */ "./src/addons/addons/custom-zoom/_runtime_entry.js"));
  },
  "copy-reporter": function copyReporter() {
    return __webpack_require__.e(/*! import() | addon-entry-copy-reporter */ "addon-entry-copy-reporter").then(__webpack_require__.bind(null, /*! ../addons/copy-reporter/_runtime_entry.js */ "./src/addons/addons/copy-reporter/_runtime_entry.js"));
  },
  "initialise-sprite-position": function initialiseSpritePosition() {
    return __webpack_require__.e(/*! import() | addon-entry-initialise-sprite-position */ "addon-entry-initialise-sprite-position").then(__webpack_require__.bind(null, /*! ../addons/initialise-sprite-position/_runtime_entry.js */ "./src/addons/addons/initialise-sprite-position/_runtime_entry.js"));
  },
  "blocks2image": function blocks2image() {
    return __webpack_require__.e(/*! import() | addon-entry-blocks2image */ "addon-entry-blocks2image").then(__webpack_require__.bind(null, /*! ../addons/blocks2image/_runtime_entry.js */ "./src/addons/addons/blocks2image/_runtime_entry.js"));
  },
  "remove-curved-stage-border": function removeCurvedStageBorder() {
    return __webpack_require__.e(/*! import() | addon-entry-remove-curved-stage-border */ "addon-entry-remove-curved-stage-border").then(__webpack_require__.bind(null, /*! ../addons/remove-curved-stage-border/_runtime_entry.js */ "./src/addons/addons/remove-curved-stage-border/_runtime_entry.js"));
  },
  "transparent-orphans": function transparentOrphans() {
    return __webpack_require__.e(/*! import() | addon-entry-transparent-orphans */ "addon-entry-transparent-orphans").then(__webpack_require__.bind(null, /*! ../addons/transparent-orphans/_runtime_entry.js */ "./src/addons/addons/transparent-orphans/_runtime_entry.js"));
  },
  "paint-by-default": function paintByDefault() {
    return __webpack_require__.e(/*! import() | addon-entry-paint-by-default */ "addon-entry-paint-by-default").then(__webpack_require__.bind(null, /*! ../addons/paint-by-default/_runtime_entry.js */ "./src/addons/addons/paint-by-default/_runtime_entry.js"));
  },
  "block-cherry-picking": function blockCherryPicking() {
    return __webpack_require__.e(/*! import() | addon-default-entry */ "addon-default-entry").then(__webpack_require__.bind(null, /*! ../addons/block-cherry-picking/_runtime_entry.js */ "./src/addons/addons/block-cherry-picking/_runtime_entry.js"));
  },
  "hide-new-variables": function hideNewVariables() {
    return __webpack_require__.e(/*! import() | addon-entry-hide-new-variables */ "addon-entry-hide-new-variables").then(__webpack_require__.bind(null, /*! ../addons/hide-new-variables/_runtime_entry.js */ "./src/addons/addons/hide-new-variables/_runtime_entry.js"));
  },
  "editor-extra-keys": function editorExtraKeys() {
    return __webpack_require__.e(/*! import() | addon-entry-editor-extra-keys */ "addon-entry-editor-extra-keys").then(__webpack_require__.bind(null, /*! ../addons/editor-extra-keys/_runtime_entry.js */ "./src/addons/addons/editor-extra-keys/_runtime_entry.js"));
  },
  "hide-delete-button": function hideDeleteButton() {
    return __webpack_require__.e(/*! import() | addon-entry-hide-delete-button */ "addon-entry-hide-delete-button").then(__webpack_require__.bind(null, /*! ../addons/hide-delete-button/_runtime_entry.js */ "./src/addons/addons/hide-delete-button/_runtime_entry.js"));
  },
  "no-script-bumping": function noScriptBumping() {
    return __webpack_require__.e(/*! import() | addon-entry-no-script-bumping */ "addon-entry-no-script-bumping").then(__webpack_require__.bind(null, /*! ../addons/no-script-bumping/_runtime_entry.js */ "./src/addons/addons/no-script-bumping/_runtime_entry.js"));
  },
  "disable-stage-drag-select": function disableStageDragSelect() {
    return __webpack_require__.e(/*! import() | addon-entry-disable-stage-drag-select */ "addon-entry-disable-stage-drag-select").then(__webpack_require__.bind(null, /*! ../addons/disable-stage-drag-select/_runtime_entry.js */ "./src/addons/addons/disable-stage-drag-select/_runtime_entry.js"));
  },
  "move-to-top-bottom": function moveToTopBottom() {
    return __webpack_require__.e(/*! import() | addon-default-entry */ "addon-default-entry").then(__webpack_require__.bind(null, /*! ../addons/move-to-top-bottom/_runtime_entry.js */ "./src/addons/addons/move-to-top-bottom/_runtime_entry.js"));
  },
  "move-to-top-layer": function moveToTopLayer() {
    return __webpack_require__.e(/*! import() | addon-entry-move-to-top-layer */ "addon-entry-move-to-top-layer").then(__webpack_require__.bind(null, /*! ../addons/move-to-top-layer/_runtime_entry.js */ "./src/addons/addons/move-to-top-layer/_runtime_entry.js"));
  },
  "disable-paste-offset": function disablePasteOffset() {
    return __webpack_require__.e(/*! import() | addon-entry-disable-paste-offset */ "addon-entry-disable-paste-offset").then(__webpack_require__.bind(null, /*! ../addons/disable-paste-offset/_runtime_entry.js */ "./src/addons/addons/disable-paste-offset/_runtime_entry.js"));
  },
  "block-duplicate": function blockDuplicate() {
    return __webpack_require__.e(/*! import() | addon-default-entry */ "addon-default-entry").then(__webpack_require__.bind(null, /*! ../addons/block-duplicate/_runtime_entry.js */ "./src/addons/addons/block-duplicate/_runtime_entry.js"));
  },
  "rename-broadcasts": function renameBroadcasts() {
    return __webpack_require__.e(/*! import() | addon-default-entry */ "addon-default-entry").then(__webpack_require__.bind(null, /*! ../addons/rename-broadcasts/_runtime_entry.js */ "./src/addons/addons/rename-broadcasts/_runtime_entry.js"));
  },
  "swap-local-global": function swapLocalGlobal() {
    return __webpack_require__.e(/*! import() | addon-entry-swap-local-global */ "addon-entry-swap-local-global").then(__webpack_require__.bind(null, /*! ../addons/swap-local-global/_runtime_entry.js */ "./src/addons/addons/swap-local-global/_runtime_entry.js"));
  },
  "editor-comment-previews": function editorCommentPreviews() {
    return __webpack_require__.e(/*! import() | addon-default-entry */ "addon-default-entry").then(__webpack_require__.bind(null, /*! ../addons/editor-comment-previews/_runtime_entry.js */ "./src/addons/addons/editor-comment-previews/_runtime_entry.js"));
  },
  "columns": function columns() {
    return __webpack_require__.e(/*! import() | addon-entry-columns */ "addon-entry-columns").then(__webpack_require__.bind(null, /*! ../addons/columns/_runtime_entry.js */ "./src/addons/addons/columns/_runtime_entry.js"));
  },
  "number-pad": function numberPad() {
    return __webpack_require__.e(/*! import() | addon-entry-number-pad */ "addon-entry-number-pad").then(__webpack_require__.bind(null, /*! ../addons/number-pad/_runtime_entry.js */ "./src/addons/addons/number-pad/_runtime_entry.js"));
  },
  "editor-number-arrow-keys": function editorNumberArrowKeys() {
    return __webpack_require__.e(/*! import() | addon-entry-editor-number-arrow-keys */ "addon-entry-editor-number-arrow-keys").then(__webpack_require__.bind(null, /*! ../addons/editor-number-arrow-keys/_runtime_entry.js */ "./src/addons/addons/editor-number-arrow-keys/_runtime_entry.js"));
  },
  "expanded-backpack": function expandedBackpack() {
    return __webpack_require__.e(/*! import() | addon-entry-expanded-backpack */ "addon-entry-expanded-backpack").then(__webpack_require__.bind(null, /*! ../addons/expanded-backpack/_runtime_entry.js */ "./src/addons/addons/expanded-backpack/_runtime_entry.js"));
  },
  "script-snap": function scriptSnap() {
    return __webpack_require__.e(/*! import() | addon-entry-script-snap */ "addon-entry-script-snap").then(__webpack_require__.bind(null, /*! ../addons/script-snap/_runtime_entry.js */ "./src/addons/addons/script-snap/_runtime_entry.js"));
  },
  "fullscreen": function fullscreen() {
    return __webpack_require__.e(/*! import() | addon-entry-fullscreen */ "addon-entry-fullscreen").then(__webpack_require__.bind(null, /*! ../addons/fullscreen/_runtime_entry.js */ "./src/addons/addons/fullscreen/_runtime_entry.js"));
  },
  "hide-stage": function hideStage() {
    return __webpack_require__.e(/*! import() | addon-entry-hide-stage */ "addon-entry-hide-stage").then(__webpack_require__.bind(null, /*! ../addons/hide-stage/_runtime_entry.js */ "./src/addons/addons/hide-stage/_runtime_entry.js"));
  },
  "tw-straighten-comments": function twStraightenComments() {
    return __webpack_require__.e(/*! import() | addon-entry-tw-straighten-comments */ "addon-entry-tw-straighten-comments").then(__webpack_require__.bind(null, /*! ../addons/tw-straighten-comments/_runtime_entry.js */ "./src/addons/addons/tw-straighten-comments/_runtime_entry.js"));
  },
  "tw-remove-backpack": function twRemoveBackpack() {
    return __webpack_require__.e(/*! import() | addon-entry-tw-remove-backpack */ "addon-entry-tw-remove-backpack").then(__webpack_require__.bind(null, /*! ../addons/tw-remove-backpack/_runtime_entry.js */ "./src/addons/addons/tw-remove-backpack/_runtime_entry.js"));
  },
  "tw-remove-feedback": function twRemoveFeedback() {
    return __webpack_require__.e(/*! import() | addon-entry-tw-remove-feedback */ "addon-entry-tw-remove-feedback").then(__webpack_require__.bind(null, /*! ../addons/tw-remove-feedback/_runtime_entry.js */ "./src/addons/addons/tw-remove-feedback/_runtime_entry.js"));
  },
  "tw-disable-cloud-variables": function twDisableCloudVariables() {
    return __webpack_require__.e(/*! import() | addon-entry-tw-disable-cloud-variables */ "addon-entry-tw-disable-cloud-variables").then(__webpack_require__.bind(null, /*! ../addons/tw-disable-cloud-variables/_runtime_entry.js */ "./src/addons/addons/tw-disable-cloud-variables/_runtime_entry.js"));
  },
  "tw-disable-compiler": function twDisableCompiler() {
    return __webpack_require__.e(/*! import() | addon-entry-tw-disable-compiler */ "addon-entry-tw-disable-compiler").then(__webpack_require__.bind(null, /*! ../addons/tw-disable-compiler/_runtime_entry.js */ "./src/addons/addons/tw-disable-compiler/_runtime_entry.js"));
  },
  "editor-stepping": function editorStepping() {
    return __webpack_require__.e(/*! import() | addon-entry-editor-stepping */ "addon-entry-editor-stepping").then(__webpack_require__.bind(null, /*! ../addons/editor-stepping/_runtime_entry.js */ "./src/addons/addons/editor-stepping/_runtime_entry.js"));
  }
});

/***/ }),

/***/ "./src/addons/generated/l10n-entries.js":
/*!**********************************************!*\
  !*** ./src/addons/generated/l10n-entries.js ***!
  \**********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* generated by pull.js */
/* harmony default export */ __webpack_exports__["default"] = ({
  "de": function de() {
    return __webpack_require__.e(/*! import() | addon-l10n-de */ "addon-l10n-de").then(__webpack_require__.t.bind(null, /*! ../addons-l10n/de.json */ "./src/addons/addons-l10n/de.json", 3));
  },
  "es": function es() {
    return __webpack_require__.e(/*! import() | addon-l10n-es */ "addon-l10n-es").then(__webpack_require__.t.bind(null, /*! ../addons-l10n/es.json */ "./src/addons/addons-l10n/es.json", 3));
  },
  "fi": function fi() {
    return __webpack_require__.e(/*! import() | addon-l10n-fi */ "addon-l10n-fi").then(__webpack_require__.t.bind(null, /*! ../addons-l10n/fi.json */ "./src/addons/addons-l10n/fi.json", 3));
  },
  "fr": function fr() {
    return __webpack_require__.e(/*! import() | addon-l10n-fr */ "addon-l10n-fr").then(__webpack_require__.t.bind(null, /*! ../addons-l10n/fr.json */ "./src/addons/addons-l10n/fr.json", 3));
  },
  "hu": function hu() {
    return __webpack_require__.e(/*! import() | addon-l10n-hu */ "addon-l10n-hu").then(__webpack_require__.t.bind(null, /*! ../addons-l10n/hu.json */ "./src/addons/addons-l10n/hu.json", 3));
  },
  "it": function it() {
    return __webpack_require__.e(/*! import() | addon-l10n-it */ "addon-l10n-it").then(__webpack_require__.t.bind(null, /*! ../addons-l10n/it.json */ "./src/addons/addons-l10n/it.json", 3));
  },
  "ja": function ja() {
    return __webpack_require__.e(/*! import() | addon-l10n-ja */ "addon-l10n-ja").then(__webpack_require__.t.bind(null, /*! ../addons-l10n/ja.json */ "./src/addons/addons-l10n/ja.json", 3));
  },
  "ko": function ko() {
    return __webpack_require__.e(/*! import() | addon-l10n-ko */ "addon-l10n-ko").then(__webpack_require__.t.bind(null, /*! ../addons-l10n/ko.json */ "./src/addons/addons-l10n/ko.json", 3));
  },
  "nl": function nl() {
    return __webpack_require__.e(/*! import() | addon-l10n-nl */ "addon-l10n-nl").then(__webpack_require__.t.bind(null, /*! ../addons-l10n/nl.json */ "./src/addons/addons-l10n/nl.json", 3));
  },
  "pl": function pl() {
    return __webpack_require__.e(/*! import() | addon-l10n-pl */ "addon-l10n-pl").then(__webpack_require__.t.bind(null, /*! ../addons-l10n/pl.json */ "./src/addons/addons-l10n/pl.json", 3));
  },
  "pt": function pt() {
    return __webpack_require__.e(/*! import() | addon-l10n-pt */ "addon-l10n-pt").then(__webpack_require__.t.bind(null, /*! ../addons-l10n/pt.json */ "./src/addons/addons-l10n/pt.json", 3));
  },
  "ro": function ro() {
    return __webpack_require__.e(/*! import() | addon-l10n-ro */ "addon-l10n-ro").then(__webpack_require__.t.bind(null, /*! ../addons-l10n/ro.json */ "./src/addons/addons-l10n/ro.json", 3));
  },
  "ru": function ru() {
    return __webpack_require__.e(/*! import() | addon-l10n-ru */ "addon-l10n-ru").then(__webpack_require__.t.bind(null, /*! ../addons-l10n/ru.json */ "./src/addons/addons-l10n/ru.json", 3));
  },
  "sl": function sl() {
    return __webpack_require__.e(/*! import() | addon-l10n-sl */ "addon-l10n-sl").then(__webpack_require__.t.bind(null, /*! ../addons-l10n/sl.json */ "./src/addons/addons-l10n/sl.json", 3));
  },
  "tr": function tr() {
    return __webpack_require__.e(/*! import() | addon-l10n-tr */ "addon-l10n-tr").then(__webpack_require__.t.bind(null, /*! ../addons-l10n/tr.json */ "./src/addons/addons-l10n/tr.json", 3));
  },
  "zh-cn": function zhCn() {
    return __webpack_require__.e(/*! import() | addon-l10n-zh-cn */ "addon-l10n-zh-cn").then(__webpack_require__.t.bind(null, /*! ../addons-l10n/zh-cn.json */ "./src/addons/addons-l10n/zh-cn.json", 3));
  },
  "zh-tw": function zhTw() {
    return __webpack_require__.e(/*! import() | addon-l10n-zh-tw */ "addon-l10n-zh-tw").then(__webpack_require__.t.bind(null, /*! ../addons-l10n/zh-tw.json */ "./src/addons/addons-l10n/zh-tw.json", 3));
  }
});

/***/ }),

/***/ "./src/addons/libraries/common/cs/text-color.esm.js":
/*!**********************************************************!*\
  !*** ./src/addons/libraries/common/cs/text-color.esm.js ***!
  \**********************************************************/
/*! exports provided: parseHex, convertToHex, convertFromHsv, convertToHsv, brightness, textColor, multiply, brighten, alphaBlend, removeAlpha, makeHsv, recolorFilter */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "parseHex", function() { return parseHex; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "convertToHex", function() { return convertToHex; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "convertFromHsv", function() { return convertFromHsv; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "convertToHsv", function() { return convertToHsv; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "brightness", function() { return brightness; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "textColor", function() { return textColor; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "multiply", function() { return multiply; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "brighten", function() { return brighten; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "alphaBlend", function() { return alphaBlend; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "removeAlpha", function() { return removeAlpha; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "makeHsv", function() { return makeHsv; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "recolorFilter", function() { return recolorFilter; });
function parseHex(hex) {
  return {
    r: parseInt(hex.substring(1, 3), 16),
    g: parseInt(hex.substring(3, 5), 16),
    b: parseInt(hex.substring(5, 7), 16),
    a: hex.length >= 9 ? parseInt(hex.substring(7, 9), 16) / 255 : 1
  };
}
function convertComponentToHex(a) {
  a = Math.round(a).toString(16);
  if (a.length === 1) return "0".concat(a);
  return a;
}
function convertToHex(obj) {
  var r = convertComponentToHex(obj.r);
  var g = convertComponentToHex(obj.g);
  var b = convertComponentToHex(obj.b);
  var a = obj.a !== undefined ? convertComponentToHex(255 * obj.a) : "";
  return "#".concat(r).concat(g).concat(b).concat(a);
}
function convertFromHsv(_ref) {
  var h = _ref.h,
    s = _ref.s,
    v = _ref.v;
  if (s === 0) return {
    r: 255 * v,
    g: 255 * v,
    b: 255 * v
  };
  h %= 360;
  if (h < 0) h += 360;
  var h1 = h / 60;
  var hi = Math.floor(h1);
  var x = v * (1 - s * (1 - h1 + hi));
  var y = v * (1 - s * (h1 - hi));
  var z = v * (1 - s);
  switch (hi) {
    case 0:
      return {
        r: 255 * v,
        g: 255 * x,
        b: 255 * z
      };
    case 1:
      return {
        r: 255 * y,
        g: 255 * v,
        b: 255 * z
      };
    case 2:
      return {
        r: 255 * z,
        g: 255 * v,
        b: 255 * x
      };
    case 3:
      return {
        r: 255 * z,
        g: 255 * y,
        b: 255 * v
      };
    case 4:
      return {
        r: 255 * x,
        g: 255 * z,
        b: 255 * v
      };
    case 5:
      return {
        r: 255 * v,
        g: 255 * z,
        b: 255 * y
      };
  }
}
function convertToHsv(_ref2) {
  var r = _ref2.r,
    g = _ref2.g,
    b = _ref2.b;
  r /= 255;
  g /= 255;
  b /= 255;
  var v = Math.max(r, g, b);
  var d = v - Math.min(r, g, b);
  if (d === 0) return {
    h: 0,
    s: 0,
    v: v
  }; // gray
  var s = d / v;
  var hr = (v - r) / d;
  var hg = (v - g) / d;
  var hb = (v - b) / d;
  var h1;
  if (!hr) h1 = hb - hg;else if (!hg) h1 = 2 + hr - hb;else if (!hb) h1 = 4 + hg - hr;
  var h = 60 * h1 % 360;
  return {
    h: h,
    s: s,
    v: v
  };
}
function brightness(hex) {
  var _parseHex = parseHex(hex),
    r = _parseHex.r,
    g = _parseHex.g,
    b = _parseHex.b;
  return r * 0.299 + g * 0.587 + b * 0.114;
}
function textColor(hex, black, white, threshold) {
  threshold = threshold !== undefined ? threshold : 170;
  if (typeof threshold !== "number") threshold = brightness(threshold);
  if (brightness(hex) > threshold) {
    // https://stackoverflow.com/a/3943023
    return black !== undefined ? black : "#575e75";
  } else {
    return white !== undefined ? white : "#ffffff";
  }
}
function multiply(hex, c) {
  var _parseHex2 = parseHex(hex),
    r = _parseHex2.r,
    g = _parseHex2.g,
    b = _parseHex2.b,
    a = _parseHex2.a;
  if (c.r === undefined) c.r = 1;
  if (c.g === undefined) c.g = 1;
  if (c.b === undefined) c.b = 1;
  if (c.a === undefined) c.a = 1;
  return convertToHex({
    r: c.r * r,
    g: c.g * g,
    b: c.b * b,
    a: c.a * a
  });
}
function brighten(hex, c) {
  var _parseHex3 = parseHex(hex),
    r = _parseHex3.r,
    g = _parseHex3.g,
    b = _parseHex3.b,
    a = _parseHex3.a;
  if (c.r === undefined) c.r = 1;
  if (c.g === undefined) c.g = 1;
  if (c.b === undefined) c.b = 1;
  if (c.a === undefined) c.a = 1;
  return convertToHex({
    r: (1 - c.r) * 255 + c.r * r,
    g: (1 - c.g) * 255 + c.g * g,
    b: (1 - c.b) * 255 + c.b * b,
    a: 1 - c.a + c.a * a
  });
}
function alphaBlend(opaqueHex, transparentHex) {
  var _parseHex4 = parseHex(opaqueHex),
    r1 = _parseHex4.r,
    g1 = _parseHex4.g,
    b1 = _parseHex4.b;
  var _parseHex5 = parseHex(transparentHex),
    r2 = _parseHex5.r,
    g2 = _parseHex5.g,
    b2 = _parseHex5.b,
    a = _parseHex5.a;
  return convertToHex({
    r: (1 - a) * r1 + a * r2,
    g: (1 - a) * g1 + a * g2,
    b: (1 - a) * b1 + a * b2
  });
}
function removeAlpha(hex) {
  return hex.substring(0, 7);
}
function makeHsv(hSource, sSource, vSource) {
  var h = typeof hSource === "number" ? hSource : convertToHsv(parseHex(hSource)).h;
  var s = typeof hSource !== "number" && convertToHsv(parseHex(hSource)).s === 0 ? 0 : typeof sSource === "number" ? sSource : convertToHsv(parseHex(sSource)).s;
  var v = typeof vSource === "number" ? vSource : convertToHsv(parseHex(vSource)).v;
  return convertToHex(convertFromHsv({
    h: h,
    s: s,
    v: v
  }));
}
function recolorFilter(hex) {
  var _parseHex6 = parseHex(hex),
    r = _parseHex6.r,
    g = _parseHex6.g,
    b = _parseHex6.b;
  return "url(\"data:image/svg+xml,\n    <svg xmlns='http://www.w3.org/2000/svg'>\n      <filter id='recolor'>\n        <feColorMatrix color-interpolation-filters='sRGB' values='\n          0 0 0 0 ".concat(r / 255, "\n          0 0 0 0 ").concat(g / 255, "\n          0 0 0 0 ").concat(b / 255, "\n          0 0 0 1 0\n        '/>\n      </filter>\n    </svg>#recolor\n  \")").split("\n").join("");
}


/***/ }),

/***/ "./src/addons/modal.css":
/*!******************************!*\
  !*** ./src/addons/modal.css ***!
  \******************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {


var content = __webpack_require__(/*! !../../node_modules/css-loader??ref--5-1!../../node_modules/postcss-loader/src??postcss!./modal.css */ "./node_modules/css-loader/index.js?!./node_modules/postcss-loader/src/index.js?!./src/addons/modal.css");

if(typeof content === 'string') content = [[module.i, content, '']];

var transform;
var insertInto;



var options = {"hmr":true}

options.transform = transform
options.insertInto = undefined;

var update = __webpack_require__(/*! ../../node_modules/style-loader/lib/addStyles.js */ "./node_modules/style-loader/lib/addStyles.js")(content, options);

if(content.locals) module.exports = content.locals;

if(false) {}

/***/ }),

/***/ "./src/addons/modal.js":
/*!*****************************!*\
  !*** ./src/addons/modal.js ***!
  \*****************************/
/*! exports provided: createEditorModal, confirm, prompt */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createEditorModal", function() { return createEditorModal; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "confirm", function() { return confirm; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "prompt", function() { return prompt; });
/* harmony import */ var _components_close_button_icon_close_svg__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../components/close-button/icon--close.svg */ "./src/components/close-button/icon--close.svg");
/* harmony import */ var _components_close_button_icon_close_svg__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_components_close_button_icon_close_svg__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _modal_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./modal.css */ "./src/addons/modal.css");
/* harmony import */ var _modal_css__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_modal_css__WEBPACK_IMPORTED_MODULE_1__);
// Based on
// https://github.com/ScratchAddons/ScratchAddons/blob/master/addon-api/content-script/modal.js



var createEditorModal = function createEditorModal(tab, title) {
  var _ref = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},
    _ref$isOpen = _ref.isOpen,
    isOpen = _ref$isOpen === void 0 ? false : _ref$isOpen;
  var container = Object.assign(document.createElement('div'), {
    className: tab.scratchClass('modal_modal-overlay'),
    dir: tab.direction
  });
  container.style.display = isOpen ? '' : 'none';
  document.body.appendChild(container);
  var modal = Object.assign(document.createElement('div'), {
    className: tab.scratchClass('modal_modal-content')
  });
  modal.addEventListener('click', function (e) {
    return e.stopPropagation();
  });
  container.appendChild(modal);
  var header = Object.assign(document.createElement('div'), {
    className: tab.scratchClass('modal_header')
  });
  modal.appendChild(header);
  header.appendChild(Object.assign(document.createElement('div'), {
    className: tab.scratchClass('modal_header-item', 'modal_header-item-title'),
    innerText: title
  }));
  var closeContainer = Object.assign(document.createElement('div'), {
    className: tab.scratchClass('modal_header-item', 'modal_header-item-close')
  });
  header.appendChild(closeContainer);
  var closeButton = Object.assign(document.createElement('div'), {
    className: tab.scratchClass('close-button_close-button', 'close-button_large')
  });
  closeContainer.appendChild(closeButton);
  closeButton.appendChild(Object.assign(document.createElement('img'), {
    className: tab.scratchClass('close-button_close-icon'),
    src: _components_close_button_icon_close_svg__WEBPACK_IMPORTED_MODULE_0___default.a
  }));
  var content = Object.assign(document.createElement('div'), {
    className: _modal_css__WEBPACK_IMPORTED_MODULE_1___default.a.modalContent
  });
  modal.appendChild(content);
  return {
    container: modal,
    content: content,
    backdrop: container,
    closeButton: closeButton,
    open: function open() {
      container.style.display = '';
    },
    close: function close() {
      container.style.display = 'none';
    },
    remove: container.remove.bind(container)
  };
};
var createButtonRow = function createButtonRow(tab) {
  var buttonRow = Object.assign(document.createElement('div'), {
    className: tab.scratchClass('prompt_button-row')
  });
  var cancelButton = Object.assign(document.createElement('button'), {
    className: tab.scratchClass('prompt_cancel-button'),
    innerText: tab.scratchMessage('gui.prompt.cancel')
  });
  buttonRow.appendChild(cancelButton);
  var okButton = Object.assign(document.createElement('button'), {
    className: tab.scratchClass('prompt_ok-button'),
    innerText: tab.scratchMessage('gui.prompt.ok')
  });
  buttonRow.appendChild(okButton);
  return {
    buttonRow: buttonRow,
    cancelButton: cancelButton,
    okButton: okButton
  };
};
var confirm = function confirm(tab, title, message) {
  var _ref2 = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {},
    _ref2$useEditorClasse = _ref2.useEditorClasses,
    useEditorClasses = _ref2$useEditorClasse === void 0 ? false : _ref2$useEditorClasse;
  var _tab$createModal = tab.createModal(title, {
      isOpen: true,
      useEditorClasses: useEditorClasses,
      useSizesClass: true
    }),
    remove = _tab$createModal.remove,
    container = _tab$createModal.container,
    content = _tab$createModal.content,
    backdrop = _tab$createModal.backdrop,
    closeButton = _tab$createModal.closeButton;
  var mode = tab.editorMode !== null && useEditorClasses ? 'editor' : tab.clientVersion;
  if (mode === 'editor') {
    container.classList.add(tab.scratchClass('prompt_modal-content'));
    content.classList.add(tab.scratchClass('prompt_body'));
  }
  content.appendChild(Object.assign(document.createElement('div'), {
    className: tab.scratchClass('prompt_label'),
    innerText: message
  }));
  var _createButtonRow = createButtonRow(tab, mode),
    buttonRow = _createButtonRow.buttonRow,
    cancelButton = _createButtonRow.cancelButton,
    okButton = _createButtonRow.okButton;
  content.appendChild(buttonRow);
  okButton.focus();
  return new Promise(function (resolve) {
    var cancel = function cancel() {
      remove();
      resolve(false);
    };
    var ok = function ok() {
      remove();
      resolve(true);
    };
    backdrop.addEventListener('click', cancel);
    closeButton.addEventListener('click', cancel);
    cancelButton.addEventListener('click', cancel);
    okButton.addEventListener('click', ok);
    container.addEventListener('keydown', function (e) {
      if (e.key === 'Enter') ok();
      if (e.key === 'Escape') cancel();
    });
  });
};
var prompt = function prompt(tab, title, message) {
  var defaultValue = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : '';
  var _ref3 = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {},
    _ref3$useEditorClasse = _ref3.useEditorClasses,
    useEditorClasses = _ref3$useEditorClasse === void 0 ? false : _ref3$useEditorClasse;
  var _tab$createModal2 = tab.createModal(title, {
      isOpen: true,
      useEditorClasses: useEditorClasses,
      useSizesClass: true
    }),
    remove = _tab$createModal2.remove,
    container = _tab$createModal2.container,
    content = _tab$createModal2.content,
    backdrop = _tab$createModal2.backdrop,
    closeButton = _tab$createModal2.closeButton;
  container.classList.add(tab.scratchClass('prompt_modal-content'));
  content.classList.add(tab.scratchClass('prompt_body'));
  content.appendChild(Object.assign(document.createElement('div'), {
    className: tab.scratchClass('prompt_label'),
    innerText: message
  }));
  var input = Object.assign(document.createElement('input'), {
    className: tab.scratchClass('prompt_variable-name-text-input'),
    value: defaultValue
  });
  content.appendChild(input);
  input.focus();
  input.select();
  var _createButtonRow2 = createButtonRow(tab),
    buttonRow = _createButtonRow2.buttonRow,
    cancelButton = _createButtonRow2.cancelButton,
    okButton = _createButtonRow2.okButton;
  content.appendChild(buttonRow);
  return new Promise(function (resolve) {
    var cancel = function cancel() {
      remove();
      resolve(null);
    };
    var ok = function ok() {
      remove();
      resolve(input.value);
    };
    backdrop.addEventListener('click', cancel);
    closeButton.addEventListener('click', cancel);
    cancelButton.addEventListener('click', cancel);
    okButton.addEventListener('click', ok);
    container.addEventListener('keydown', function (e) {
      if (e.key === 'Enter') ok();
      if (e.key === 'Escape') cancel();
    });
  });
};

/***/ }),

/***/ "./src/addons/redux.js":
/*!*****************************!*\
  !*** ./src/addons/redux.js ***!
  \*****************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _event_target__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./event-target */ "./src/addons/event-target.js");
/* harmony import */ var _hooks__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./hooks */ "./src/addons/hooks.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }


var AddonRedux = /*#__PURE__*/function (_EventTargetShim) {
  function AddonRedux() {
    var _this;
    _classCallCheck(this, AddonRedux);
    _this = _callSuper(this, AddonRedux);
    _this._isInReducer = false;
    _this._nextState = null;
    _hooks__WEBPACK_IMPORTED_MODULE_1__["default"].appStateReducer = function (action, prev, next) {
      _this._isInReducer = true;
      _this._nextState = next;
      _this.dispatchEvent(new CustomEvent('statechanged', {
        detail: {
          action: action,
          prev: prev,
          next: next
        }
      }));
      _this._nextState = null;
      _this._isInReducer = false;
    };
    return _this;
  }
  _inherits(AddonRedux, _EventTargetShim);
  return _createClass(AddonRedux, [{
    key: "initialize",
    value: function initialize() {
      // no-op; it is always initialized
    }
  }, {
    key: "dispatch",
    value: function dispatch(m) {
      if (this._isInReducer) {
        queueMicrotask(function () {
          return _hooks__WEBPACK_IMPORTED_MODULE_1__["default"].appStateStore.dispatch(m);
        });
      } else {
        _hooks__WEBPACK_IMPORTED_MODULE_1__["default"].appStateStore.dispatch(m);
      }
    }
  }, {
    key: "state",
    get: function get() {
      if (this._nextState) return this._nextState;
      return _hooks__WEBPACK_IMPORTED_MODULE_1__["default"].appStateStore.getState();
    }
  }]);
}(_event_target__WEBPACK_IMPORTED_MODULE_0__["default"]);
var reduxInstance = new AddonRedux();
/* harmony default export */ __webpack_exports__["default"] = (reduxInstance);

/***/ })

}]);
//# sourceMappingURL=addons.js.map